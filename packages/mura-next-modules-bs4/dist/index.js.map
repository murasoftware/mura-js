{"version":3,"file":"index.js","sources":["../src/Video/Youtube.js","../src/Video/Vimeo.js","../src/Video/Wistia.js","../src/Video/ModalVideo.js","../src/Video/Video.js","../src/ItemDate.js","../src/ItemCredits.js","../src/ItemTags.js","../src/OutputMarkup.js","../src/ArticleMeta.js","../src/Collection.js","../src/CollectionNav.js","../src/CollectionLayout.js","../src/CollectionReadMoreBtn.js","../src/ItemImage.js","../src/CollectionLayoutAccordion.js","../src/CollectionLayoutAlternatingBoxes.js","../src/CollectionLayoutAlternatingRows.js","../src/ItemCategories.js","../src/NoItemsMessage.js","../src/CollectionLayoutCards.js","../src/CollectionLayoutList.js","../src/CollectionLayoutMasonry.js","../src/CollectionLayoutSlickSlider.js","../src/Container.js","../src/Hr.js","../src/CTAButton.js","../src/Embed.js","../src/Image.js","../src/Login.js","../src/MatrixSelector.js","../src/PrimaryNav.js","../node_modules/babel-plugin-transform-async-to-promises/helpers.js","../src/ResourceHub.js","../src/Text.js","../src/PrivacyTools.js","../src/GatedAsset.js","../src/Gist.js"],"sourcesContent":["import React from 'react';\r\n\r\nfunction Youtube(props) {\r\n  const { instanceid, videoid } = props;\r\n  // z5DqB0cv8uw\r\n  return (\r\n    <div className=\"youtubeWrapper\" id={`player-${instanceid}`}>\r\n      <iframe\r\n        title=\"Youtube Player\"\r\n        src={`//www.youtube.com/embed/${videoid}?rel=0&autoplay=0&vq=hd1080&controls=1`}\r\n        frameBorder=\"0\"\r\n        allowFullScreen\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Youtube;","import React from 'react';\r\n\r\nfunction Vimeo(props) {\r\n\tconst { instanceid, videoid } = props;\r\n\t// 56282283\r\n\treturn (\r\n\t  <div className=\"vimeoWrapper\" id={`player-${instanceid}`}>\r\n\t\t<iframe\r\n\t\t\tsrc={`https://player.vimeo.com/video/${videoid}`}\r\n\t\t\twidth=\"960\"\r\n\t\t\theight=\"540\"\r\n\t\t\tframeBorder=\"0\"\r\n\t\t\tallow=\"autoplay; fullscreen\"\r\n\t\t\tallowFullScreen>\r\n\t\t</iframe>\t\t\r\n\t  </div>\r\n\t);\r\n}\r\n\r\nexport default Vimeo;","import React, {useEffect} from 'react';\r\nimport Head from 'next/head';\r\nimport Mura from 'mura.js';\r\n\r\nfunction Wistia(props) {\r\n\tconst { instanceid, videoid } = props;\r\n\r\n\tuseEffect(() => {\r\n\t\tMura.loader().loadjs(\r\n\t\t\t'https://fast.wistia.net/assets/external/E-v1.js',\r\n\t\t\t'https://fast.wistia.com/embed/medias/${videoid}.jsonp'\r\n\t\t);\r\n\t  }, []);\r\n\r\n\t// j38ihh83m5\r\n\treturn (\r\n\t  <div className=\"wistiaWrapper\" id={`player-${instanceid}`}>\r\n\t\t<Head>\r\n\t\t\t<script src='https://fast.wistia.net/assets/external/E-v1.js'></script>\r\n\t\t\t<script src={`https://fast.wistia.com/embed/medias/${videoid}.jsonp`}></script>\r\n\t\t</Head>\r\n\t\t<div\r\n\t\t\tclassName=\"wistia_responsive_padding\"\r\n\t\t\tstyle={{padding: '56.25% 0 0 0',position: 'relative'}}>\r\n\t\t\t<div\r\n\t\t\t\tclassName=\"wistia_responsive_wrapper\"\r\n\t\t\t\tstyle={{height:'100%',left:0,position:'absolute',top:0,width:'100%'}}>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName={`wistia_embed wistia_async_${videoid}`}\r\n\t\t\t\t\tseo='false'\r\n\t\t\t\t\tvideofoam='true'\r\n\t\t\t\t\tstyle={{height:'100%',width:'100%'}}>&nbsp;</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t  </div>\r\n\t);\r\n}\r\n\r\nexport default Wistia;","import React from 'react';\r\nimport Head from 'next/head';\r\n\r\nconst ModalVideo = ({props,children}) => {\r\n\r\n\tconst {modalcta,buttonclass,buttonplayiconsize,buttonctatext,showbuttonplayicon} = props;\r\n\tconst openPlayer=function(){openVidyardLightbox(props.videoid); return false;};\r\n\tswitch(modalcta) {\r\n\t\tcase \"button\":\r\n\t\t\treturn (\r\n\t\t\t\t<button\r\n\t\t\t\t\ttype=\"button\"\r\n\t\t\t\t\tonClick={openPlayer}\r\n\t\t\t\t\tclassName={`btn btn-${buttonclass}`}>\r\n\t\t\t\t\t{showbuttonplayicon ?\r\n\t\t\t\t\t\t<i className={`fas fa-play fa-${buttonplayiconsize} align-middle`}></i>\r\n\t\t\t\t\t\t:\r\n\t\t\t\t\t\tnull\r\n\t\t\t\t\t}\r\n\t\t\t\t\t{buttonctatext}\r\n\t\t\t\t\t<Head>\r\n\t\t\t\t\t\r\n\t\t\t\t\t</Head>\r\n\t\t\t\t</button>\r\n\t\t\t)\r\n\t\t\tbreak;\t\r\n\r\n\t\tdefault:\r\n\t\t\treturn <div>Nah</div>\r\n\t}\r\n}\r\n\r\nexport default ModalVideo;","import React from 'react';\r\nimport Youtube from './Youtube';\r\nimport Vimeo from './Vimeo';\r\n//import Vidyard from './Vidyard';\r\nimport Wistia from './Wistia';\r\nimport ModalVideo from './ModalVideo';\r\nimport {videoConfig} from './videoConfig';\r\n\r\nconst getVideoPlayer = props => {\r\n  const players = {};\r\n  players['youtube'] = Youtube(props);\r\n  players['vimeo'] = Vimeo(props);\r\n  players['wistia'] = Wistia(props);\r\n  //players['vidyard'] = Vidyard(props);\r\n\r\n  return players[props.videoplatform];\r\n};\r\n\r\nfunction Video(props) {\r\n\r\n  const { displaytype, videoid, videoplatform } = props;\r\n  const {modalsize} = videoConfig;\r\n  if(typeof videoplatform=='undefined' || !videoplatform.length) {\r\n    return <div>Video platform missing.</div>\r\n  }\r\n  else if(!videoid) {\r\n    return <div>Video id missing.</div>\r\n  }\r\n  else {\r\n\r\n    if(displaytype === 'modal') {\r\n      return (\r\n      <ModalVideo props={props}>\r\n        {getVideoPlayer(props)}\r\n      </ModalVideo>\r\n      )\r\n    }\r\n    else {\r\n      return getVideoPlayer(props);\r\n    }\r\n  }\r\n}\r\n\r\nexport default Video;\r\n","import React from 'react';\r\n\r\nexport const ItemDate = (props) => {\r\n    let date = '';\r\n    let formatteddate = '';\r\n    \r\n    if((props.releasedate != null && props.releasedate != '') || (props.lastupdate != null && props.lastupdate != '')) {\r\n      if(props.releasedate){\r\n        date = new Date(props.releasedate);\r\n      } else {\r\n        date = new Date(props.lastupdate);\r\n      }\r\n      formatteddate = Intl.DateTimeFormat(\"en-US\", {year: \"numeric\",month: \"long\",day: \"2-digit\"}).format(date);\r\n      return formatteddate\r\n    }    \r\n\r\n    return (\r\n        null\r\n    )\r\n  }\r\n\r\n  export default ItemDate;","import React from 'react';\r\n\r\nconst ItemCredits = (props) => {\r\n    const Credits = props.credits.split(',');\r\n    let creditsList = [];\r\n    let credit = '';\r\n    // console.log(props.tags);\r\n    for(let i = 0;i < Credits.length;i++) {\r\n        credit = Credits[i];\r\n        creditsList.push(\r\n            <div className=\"mura-item-meta__credits pb-2\" key={credit}>\r\n                By: <strong>{credit}</strong>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    return creditsList;\r\n}\r\n\r\nexport default ItemCredits;","import React from 'react';\r\nimport Badge from 'react-bootstrap/Badge';\r\n\r\nfunction ItemTags(props){\r\n    \r\n    const Tags = props.tags.split(',');;\r\n    let tagList = [];\r\n    let tag = '';\r\n    // console.log(props.tags);\r\n    for(let i = 0;i < Tags.length;i++) {\r\n        tag = Tags[i];\r\n        tagList.push(\r\n            <Badge variant=\"primary mr-2\" key={tag}>{tag}</Badge>\r\n        )\r\n    }\r\n\r\n    return tagList;\r\n\r\n}\r\n\r\nexport default ItemTags;","import React from 'react';\r\nimport ReactMarkdown from 'react-markdown/with-html';\r\nimport { getMura, getMuraConfig, Decorator  } from '@murasoftware/next-core';\r\nimport gfm from 'remark-gfm';\r\nimport slug from 'remark-slug';\r\nimport directive from 'remark-directive';\r\nimport visit from 'unist-util-visit';\r\nimport h from 'hastscript';\r\n\r\nfunction htmlDirectives() {\r\n    return transform\r\n  \r\n    function transform(tree) {\r\n      visit(tree, ['textDirective', 'leafDirective', 'containerDirective'], ondirective)\r\n    }\r\n  \r\n    function ondirective(node) {\r\n      var data = node.data || (node.data = {})\r\n      var hast = h(node.name, node.attributes)\r\n  \r\n      data.hName = hast.tagName\r\n      data.hProperties = hast.properties\r\n    }\r\n  }\r\n\r\nfunction renderDirective(elem){\r\n\r\n    //console.log(elem)\r\n\r\n    let tag=elem.node.data.hName;\r\n    let props= Object.assign({},elem.node.data.hProperties);\r\n    \r\n    try{\r\n        switch(elem.node.data.hName.toLowerCase()){\r\n            case 'module':\r\n                tag=Decorator;\r\n                props['data-render']=\"client\";\r\n                props.ssr=false;\r\n             break;\r\n\r\n            case 'content':\r\n\r\n\r\n                break;\r\n\r\n            case 'content':\r\n\r\n\r\n                break;\r\n        } \r\n        if(elem.children.length){\r\n            return React.createElement(tag, props, elem.children);\r\n        } else {\r\n            return React.createElement(tag, props);\r\n        }\r\n    } catch(e){\r\n        console.error(\"error rendering html directive\",e);\r\n        return '';\r\n    }\r\n}\r\n\r\nconst renderers = {\r\n    textDirective:renderDirective,\r\n    leafDirective:renderDirective,\r\n    containerDirective:renderDirective,\r\n    heading:function (elem){\r\n        return React.createElement('h' + elem.level, elem.node.data.hProperties, elem.children);\r\n    }\r\n    \r\n}\r\n\r\nfunction OutputMarkup({source,className}){\r\n    const parsedSource=getMura().parseStringAsTemplate(source);\r\n  \r\n    if(getMuraConfig().ConnectorConfig.htmleditortype == 'markdown'){\r\n        return(\r\n            <ReactMarkdown plugins={[gfm,slug,directive,htmlDirectives]} allowDangerousHtml renderers={renderers} children={parsedSource} className={className} />\r\n        )\r\n    }\r\n\r\n    return(\r\n        <div dangerouslySetInnerHTML={{__html:parsedSource}} className={className} />\r\n    )\r\n    \r\n}\r\n\r\nexport default OutputMarkup;","import React from 'react';\r\nimport ItemDate from './ItemDate';\r\nimport ItemCredits from './ItemCredits';\r\nimport ItemTags from './ItemTags';\r\nimport OutputMarkup from './OutputMarkup';\r\n\r\nexport const ArticleMeta = (props) => {\r\n    console.log('fields ArticleMeta: ' + props.fields);\r\n    \r\n    const fields = props.fields ? props.fields : '';\r\n    const fieldlist = fields ? fields.toLowerCase().split(\",\") : [];\r\n    const titleclass = props.titleclass ? props.titleclass : '';    \r\n    const item = props.content;\r\n    let catAssignments = item.categoryassignments;\r\n    let FeaturedCategoryOnly = \"no\";\r\n    if (props.featuredcategoryonly){\r\n        FeaturedCategoryOnly = \"yes\";\r\n    }\r\n    // console.log('fieldlist: ' + fieldlist);\r\n    return (\r\n        <div className=\"mura-article-meta\">\r\n            {\r\n                fieldlist.map(field => {\r\n                    switch(field) {\r\n                    case \"category\":\r\n                        return (\r\n                            <div key={field} className=\"mura-item-meta__category\">\r\n                                <ItemCategories categories={catAssignments} featuredonly={FeaturedCategoryOnly} />\r\n                            </div>\r\n                        );\r\n                    case \"title\":\r\n                        return (\r\n                            <h1 key=\"title\" key={field} className={titleclass}>{item.title}</h1>\r\n                        );\r\n                    case \"menutitle\":\r\n                        return (\r\n                            <p key=\"menutitle\" key={field} className=\"mura-item-meta__menutitle\">{item.menutitle}</p>\r\n                        );\r\n                    case \"summary\":\r\n                        return (\r\n                            <OutputMarkup source={item.summary} className=\"lead\" key={field} />\r\n                        );\r\n                    case \"date\":\r\n                    case \"releasedate\":\r\n                        return (\r\n                            <span className=\"mura-item-meta__date\" key={field}>\r\n                               <ItemDate releasedate={item.releasedate} lastupdate={item.lastupdate}></ItemDate>\r\n                            </span>\r\n                        );\r\n                    case \"credits\":\r\n                        if(item.credits){\r\n                            return (\r\n                                <ItemCredits credits={item.credits} key={field} />\r\n                            );\r\n                        }\r\n                        return null\r\n                    case \"tags\":\r\n                        if(item.tags){\r\n                            return (\r\n                                <div className=\"mura-item-meta__tags\" key={field}>\r\n                                    <ItemTags tagshref=\"/blog\" tags={item.tags} />\r\n                                </div>\r\n                            );\r\n                        }\r\n                        return null\r\n                    default:\r\n                        return <div className={`mura-item-meta__${field}`} key={field} data-value={props.content[field]}>{props.content[field]}</div>\r\n                    }\r\n                })\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ArticleMeta;","import React,{ useState,useEffect } from 'react';\r\nimport Link from \"next/link\";\r\nimport { getMura, getMuraConfig, getHref } from '@murasoftware/next-core';\r\n\r\nexport const getLayout=function(layout) {\r\n  const muraConfig =getMuraConfig();\r\n  const { ComponentRegistry } = muraConfig;\r\n  const uselayout = (!layout || layout == 'default') ? \"List\" : layout;\r\n\r\n  if(typeof ComponentRegistry[uselayout] != 'undefined') {\r\n    return ComponentRegistry[uselayout];\r\n  } else {\r\n    console.log(\"Layout not registered: \",layout);\r\n    return ComponentRegistry['List'];\r\n  }\r\n}\r\n\r\n\r\nfunction getDefaultQueryPropsFromLayout(layout,item){\r\n  if(layout){\r\n    return layout.getQueryProps ? layout.getQueryProps(item) : {fields:''};\r\n  } else {\r\n    return  {fields:''};\r\n  }\r\n}\r\n\r\nfunction Collection(props) {\r\n  const Mura = getMura();\r\n  const objectparams = Object.assign({}, props);\r\n  const DynamicCollectionLayout = getLayout(objectparams.layout).component;\r\n\r\n  objectparams.fields= getDefaultQueryPropsFromLayout(DynamicCollectionLayout,objectparams).fields || objectparams.fields || 'Image,Date,Title,Summary,Credits,Tags';\r\n  objectparams.dynamicProps=objectparams.dynamicProps ||  {};\r\n\r\n  const _collection=objectparams.dynamicProps.collection ? new Mura.EntityCollection(objectparams.dynamicProps.collection,Mura._requestcontext) : false;\r\n\r\n  if(!_collection){\r\n    const [collection,setCollection]=useState(_collection);\r\n\r\n    useEffect(() => {\r\n      let isMounted = true;\r\n      if(isMounted){\r\n        getDynamicProps(objectparams).then((_dynamicProps)=>{\r\n          if(isMounted){\r\n            setCollection(new Mura.EntityCollection(_dynamicProps.collection,Mura._requestcontext));\r\n          }\r\n        });   \r\n      }\r\n      return () => { isMounted = false };\r\n    }, []);\r\n\r\n    if(collection) {\r\n      return (\r\n        <DynamicCollectionLayout setCollection={setCollection} collection={collection} props={objectparams} link={RouterlessLink}/>\r\n      )\r\n    }\r\n    else {\r\n      return (\r\n       <div></div>\r\n      )\r\n    }\r\n  } else {\r\n    const [collection,setCollection]=useState(_collection);\r\n\r\n    return (\r\n        <DynamicCollectionLayout setCollection={setCollection} collection={collection} props={props} link={RouterLink}/>\r\n      )\r\n  }\r\n}\r\n\r\nexport const RouterlessLink = function({href,children,className}) {\r\n  return (\r\n    <a href={getHref(href)} className={className}>\r\n      {children}\r\n    </a>\r\n  );\r\n}\r\n\r\nexport const RouterLink = function({href,children,className}) {\r\n  return (\r\n    <Link href={getHref(href)}>\r\n      <a className={className}>{children}</a>\r\n    </Link>\r\n  );\r\n}\r\n\r\nexport const getDynamicProps = async function(item){\r\n  const Mura = getMura();\r\n  const getItemsPerPage = function(item){\r\n    if(Mura.renderMode !='static'){\r\n      if(typeof item.nextn != 'undefined'){\r\n       return item.nextn\r\n      } else if(typeof item.itemsperpage != 'undefined'){\r\n       return item.itemsperpage;\r\n      } else {\r\n        return 0;\r\n      }\r\n    } else {\r\n      return 0;\r\n    }\r\n  }\r\n  const data = {};\r\n  let cdata = {};\r\n  let {content} = item;\r\n\r\n  if(item.sourcetype === 'children') {\r\n    const feed = Mura.getFeed('content');\r\n\r\n    if(content.getAll) {\r\n      cdata = content.getAll();\r\n    }\r\n    else {\r\n      cdata = content;\r\n    }\r\n\r\n    feed.andProp('parentid').isEQ(cdata.contentid);\r\n    feed.fields(getSelectFields(item));\r\n    feed.expand(getExpandFields(item));\r\n    feed.maxItems(item.maxitems);;\r\n    feed.itemsPerPage(getItemsPerPage(item))\r\n    feed.sort(cdata.sortby,cdata.sortdirection);\r\n    \r\n    const query = await feed.getQuery();\r\n    data.collection = query.getAll();\r\n  }\r\n  else if(item.sourcetype === 'relatedcontent') {\r\n    const src = item.source;\r\n   \r\n    if(src==='custom'){\r\n      if(typeof item.items !='undefined'){\r\n        if(!Array.isArray(item.items)){\r\n          try{\r\n            JSON.parse(item.items);\r\n          } catch(e){\r\n            console.log(e)\r\n            item.items=[];\r\n          }\r\n        }\r\n      } else {\r\n        item.items=[];\r\n      }\r\n\r\n      if(item.items.length){\r\n        const related = await Mura.getFeed('content')\r\n        .where()\r\n        .fields(getSelectFields(item))\r\n        .expand(getExpandFields(item))\r\n        .itemsPerPage(getItemsPerPage(item))\r\n        .maxItems(item.maxitems)\r\n        .findMany(item.items)\r\n        .getQuery();\r\n        \r\n        data.collection=related.getAll();\r\n      } else {\r\n        data.collection={\r\n          items: [],\r\n          totaltems: 0,\r\n        }\r\n      }\r\n    } else {\r\n      if(!content.getRelatedContent){\r\n        content=Mura.getEntity(\"content\").set(content);\r\n      }\r\n      const related = await content.getRelatedContent(\r\n        src,\r\n        {\r\n          fields:getSelectFields(item),\r\n          expand:getExpandFields(item),\r\n          imagesizes:getImageSizes(item),\r\n          itemsPerPage:getItemsPerPage(item),\r\n          maxitems:item.maxitems\r\n        }\r\n      );\r\n      data.collection = related.getAll(); \r\n    }\r\n    return data;\r\n  }\r\n  else if ((\r\n    typeof item.sourcetype === 'undefined'\r\n    || item.sourcetype === ''\r\n    ) \r\n    ||  (\r\n      typeof item.sourcetype !== 'undefined' &&\r\n      item.sourcetype === 'localindex' &&\r\n      Mura.isUUID(item.source)\r\n    )\r\n  ) {\r\n    const feed = Mura.getFeed('content');\r\n\r\n    if(item.source) {\r\n      feed.andProp('feedid').isEQ(item.source);\r\n    }\r\n    feed.fields(getSelectFields(item));\r\n    feed.expand(getExpandFields(item));\r\n    feed.imageSizes(getImageSizes(item));\r\n    feed.maxItems(item.maxitems);\r\n    feed.itemsPerPage(getItemsPerPage(item));\r\n\r\n    //Add stuff like maxitems, nextn\r\n      \r\n    const query = await feed.getQuery();\r\n\r\n    data.collection = query.getAll();\r\n  }\r\n\r\n  return data;\r\n};\r\n\r\nconst getExpandFields = function(item) {\r\n\r\n  const data = getLayout(item.layout).getQueryProps();\r\n\r\n  if(data.expand){\r\n    return data.expand;\r\n  } else {\r\n    return '';\r\n  }\r\n\r\n}\r\n\r\nconst getImageSizes = function(item) {\r\n\r\n  const data = getLayout(item.layout).getQueryProps();\r\n\r\n  if(data.imagesizes){\r\n    return data.imagesizes;\r\n  } else {\r\n    return '';\r\n  }\r\n\r\n}\r\n\r\nexport const getSelectFields = function(item) {\r\n\r\n  const data = getLayout(item.layout).getQueryProps(item);\r\n\r\n  let fieldlist = '';\r\n\r\n  if(data.fields) {\r\n    fieldlist = data.fields;\r\n  } else {\r\n    fieldlist = data.fields ? data.fields  : '';\r\n  }\r\n\r\n  if(!fieldlist){\r\n    return '';\r\n  }\r\n\r\n  let fieldarray=fieldlist.split(\",\");\r\n  let hasDate=false;\r\n  let hasFilename=false;\r\n  let hasReleaseDate=false;\r\n  let hasLastUpdate=false;\r\n  let hasCreated=false;\r\n  let hasImage=false;\r\n  let hasFileid=false;\r\n  let hasContentid=false;\r\n  let hasContenthistid=false;\r\n  let hasParentid=false;\r\n\r\n  fieldarray=fieldarray.filter(field=>{\r\n    field=field.toLowerCase();\r\n    if(field==='filename'){\r\n      hasFilename=true;\r\n    } else if(field==='date'){\r\n      hasDate=true;\r\n      return false;\r\n    } else if(field==='image'){\r\n      hasImage=true;\r\n      return false;\r\n    } else if(field==='images'){\r\n      hasImage=true;\r\n      return false;\r\n    } else if(field==='fileid'){\r\n      hasFileid=true;\r\n    } else if(field==='contentid'){\r\n      hasContentid=true;\r\n    } else if(field==='contenthistid'){\r\n      hasContenthistid=true;\r\n    } else if(field==='parentid'){\r\n      hasParentid=true;\r\n    } \r\n    return true;\r\n  });\r\n\r\n  //There is no generic date field.  If selected these are the options\r\n  if(hasDate){\r\n    if(!hasReleaseDate){\r\n      fieldarray.push('releasedate');\r\n    } \r\n    if(!hasLastUpdate){\r\n      fieldarray.push('lastupdate');\r\n    }\r\n    if(!hasCreated){\r\n      fieldarray.push('created');\r\n    }\r\n  }\r\n  if(hasImage){\r\n    if(!hasFileid){\r\n      fieldarray.push('fileid');\r\n    }\r\n    fieldarray.push('images');\r\n  }\r\n  if(!hasFilename){\r\n    fieldarray.push('filename');\r\n  }\r\n  if(!hasContentid){\r\n    fieldarray.push('contentid');\r\n  }\r\n  if(!hasContenthistid){\r\n    fieldarray.push('contenthistid');\r\n  }\r\n  if(!hasParentid){\r\n    fieldarray.push('parentid');\r\n  }\r\n  return fieldarray.join(',').toLowerCase();\r\n}\r\n\r\n\r\nexport default Collection;","import Mura from 'mura.js';\r\nimport React, {useState,useEffect} from \"react\";\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faChevronRight } from '@fortawesome/free-solid-svg-icons'\r\nimport { faChevronLeft } from '@fortawesome/free-solid-svg-icons'\r\n\r\nconst CollectionNav = (props) => {\r\n\tlet nav = [];\r\n\tconst {collection,setCollection,pos,nextn,setPos,scrollpages,instanceid,itemsTo,setItemsTo} = props;\r\n\r\n\r\n\tif(Mura.renderMode == 'static'){\r\n\t\tconst items = collection.get('items');\r\n\t\tconst maxItems = props.maxitems;\r\n\t\tconst next = pos+nextn;\r\n\t\tconst prev = pos > 0 ? pos-nextn > 0 ? pos-nextn : 0 : 0;\r\n\t\tlet itemsOf = pos+nextn > items.length ? items.length : pos+nextn;\r\n\t\tlet itemsToMax = items.length >= maxItems ? maxItems : items.length\r\n\t\t\r\n\t\tif (maxItems < items.length && pos+nextn > maxItems){\r\n\t\t\titemsToMax = maxItems;\r\n\t\t}\r\n\r\n\t\tif(scrollpages){\r\n\t\t\tif(Mura.isInNode()){\r\n\t\t\t\tconst isEndVisible = () => {\r\n\t\t\t\t\tconst end=Mura(`div.mura-collection-end[data-instanceid=\"${instanceid}\"]`);\r\n\t\t\t\t\tif(itemsTo  && maxItems && Mura.isScrolledIntoView(end.node)){\r\n\t\t\t\t\t\tif(itemsTo < (maxItems)){\r\n\t\t\t\t\t\t\tsetItemsTo(itemsTo+1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else if(itemsTo < (maxItems)){\r\n\t\t\t\t\t\tsetTimeout(isEndVisible,50);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tMura(isEndVisible);\r\n\t\t\t}\t\t\r\n\r\n\t\t\treturn (\r\n\t\t\t\t<div className=\"mura-collection-end\" data-instanceid={instanceid}/>\r\n\t\t\t)\r\n\t\t}\r\n\r\n\t\tif(pos > 0) {\r\n\t\t\tnav.push (\r\n\t\t\t<NavButton key=\"prev\" pos={pos} val={prev} onItemClick={setPos} label=\"Prev\"/>\r\n\t\t\t)\r\n\t\t}\r\n\t\t\r\n\t\tif(next<itemsToMax) {\r\n\t\t\tnav.push (\r\n\t\t\t<NavButton key=\"next\" pos={pos} val={next} onItemClick={setPos} label=\"Next\"/>\r\n\t\t\t)\r\n\t\t}\r\n\t\t\r\n\t\tif(nav.length){\r\n\t\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<p>Displaying items {pos+1}-{itemsOf} of {itemsToMax}</p>\r\n\t\t\t\t<ul className=\"pagination\">\r\n\t\t\t\t\t{nav}\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\treturn '';\r\n\t\t}\r\n\r\n\t} else {\r\n\r\n\t\tif(\r\n\t\t\t((typeof scrollpages === 'boolean' || typeof scrollpages === 'number') && scrollpages)\r\n\t\t\t|| ( typeof scrollpages === 'string' && scrollpages.toLocaleLowerCase() === 'true' )\r\n\t\t){\t\r\n\r\n\t\t\tconst [endindex,setEndindex]=useState(0);\r\n\t\r\n\t\t\tconst isEndVisible = () => {\r\n\t\t\t\tconst end=Mura(`div.mura-collection-end[data-instanceid=\"${instanceid}\"]`);\r\n\t\t\t\tif(collection.has('next')){\r\n\t\t\t\t\tif(Mura.isScrolledIntoView(end.node) &&  endindex != collection.get('endindex')){\r\n\t\t\t\t\t\tsetEndindex(collection.get('endindex'));\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tsetTimeout(isEndVisible,50);\r\n\t\t\t\t\t}\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tuseEffect(()=>{\r\n\t\t\t\tlet isMounted = true;\r\n\t\t\t\tif(isMounted){\r\n\t\t\t\t\tcollection.get('next').then(function(_collection){\r\n\t\t\t\t\t\tlet incoming=_collection.getAll();\r\n\r\n\t\t\t\t\t\tcollection.getAll().items.reverse().forEach((item)=>{\r\n\t\t\t\t\t\t\tincoming.items.unshift(item);\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tsetCollection(new Mura.EntityCollection(incoming,Mura._requestcontext));\r\n\t\t\t\t\t\tsetTimeout(isEndVisible,50);\r\n\t\t\t\t\t});\t\r\n\t\t\t\t}\r\n\t\t\t\treturn () => { isMounted = false };\r\n\t\t\t},[endindex]);\r\n\r\n\t\t\tif(!Mura.isInNode()){\t\t\t\t\r\n\t\t\t\tMura(isEndVisible);\r\n\t\t\t}\r\n\t\t\t\t\r\n\t\t\treturn (\r\n\t\t\t\t<div className=\"mura-collection-end\" data-instanceid={instanceid}/>\r\n\t\t\t)\r\n\t\t} else {\r\n\r\n\t\t\tconst goToPage = function(page){\r\n\t\t\t\tlet isMounted = true;\r\n\t\t\t\tif(isMounted){\r\n\t\t\t\t\tcollection.get(page).then(function(_collection){\r\n\t\t\t\t\t\tif(isMounted){\r\n\t\t\t\t\t\t\tsetCollection(_collection);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\treturn () => { isMounted = false };\r\n\t\t\t}\r\n\r\n\t\t\tif(collection.has('previous')) {\r\n\t\t\t\tnav.push (\r\n\t\t\t\t<NavButton key=\"prev\" val=\"previous\" onItemClick={goToPage} label=\"Prev\"/>\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(collection.has('next')) {\r\n\t\t\t\tnav.push (\r\n\t\t\t\t<NavButton key=\"next\" val=\"next\" onItemClick={goToPage} label=\"Next\"/>\r\n\t\t\t\t)\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif(nav.length){\r\n\t\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<p>Displaying items {collection.get('startindex')}-{collection.get('endindex')} of {collection.get('totalitems')}</p>\r\n\t\t\t\t<ul className=\"pagination\">\r\n\t\t\t\t\t{nav}\r\n\t\t\t\t</ul>\r\n\t\t\t</div>\r\n\t\t\t);\r\n\t\t} else {\r\n\t\t\treturn '';\r\n\t\t}\r\n\t}\r\n\r\n  }\r\n  \r\n  const NavButton = props => {\r\n\tlet {val,onItemClick} = props;\r\n  \r\n\tconst _onClick = () => {\r\n\t  onItemClick(val);\r\n\t}\r\n\r\n\t\r\n\treturn (\r\n\t  <li className=\"page-item\">\r\n\t  \t<a onClick={_onClick} className=\"page-link\" aria-label={props.label}><NavButtonLabel label={props.label} /></a>\r\n\t  </li>\r\n\t)\r\n  }\r\n\r\n  const NavButtonLabel = props => {\r\n\tif (props.label == 'Next'){\r\n\t\treturn(\r\n\t\t\t<>\r\n\t\t\t\t{props.label} <FontAwesomeIcon icon={faChevronRight} />\r\n\t\t  \t</>\r\n\t\t)\r\n\t} else {\r\n\t\treturn(\r\n\t\t\t<>\r\n\t\t\t\t<FontAwesomeIcon icon={faChevronLeft} /> {props.label}\r\n\t\t  \t</>\r\n\t\t)\r\n\t}\r\n  }\r\n  \r\n  export default CollectionNav;","import React,{ useEffect,useState } from \"react\";\r\nimport OutputMarkup from \"./OutputMarkup\";\r\nimport CollectionNav from './CollectionNav';\r\nimport { getMura } from '@murasoftware/next-core';\r\n\r\nconst CollectionLayout = ({props,collection,setCollection,link}) => {\r\n  const {nextn} = props;\r\n  const items = collection.get('items');\r\n  const [pos, setPos] = useState(0);\r\n  const [itemsTo,setItemsTo]= useState((pos+nextn > items.length ? items.length : pos+nextn));\r\n\r\n  useEffect(()=>{\r\n    setItemsTo((pos+nextn > items.length ? items.length : pos+nextn));\r\n  },[pos]);\r\n  \r\n  return (\r\n    <div>\r\n      <ul style={{'listStyle': 'none'}}>\r\n        <CurrentItems collection={collection}  itemsTo={itemsTo} pos={pos} link={link} {...props} />\r\n      </ul>\r\n      <CollectionNav setCollection={setCollection} collection={collection}  itemsTo={itemsTo}  setItemsTo={setItemsTo} pos={pos} setPos={setPos} link={link} {...props} />   \r\n    </div>\r\n  )\r\n}\r\n\r\nconst CurrentItems = (props) => {\r\n  const {collection,link,pos,itemsTo,scrollpages} = props;\r\n  let itemsList = [];\r\n  let item = '';\r\n  const Link = link;\r\n  const items = collection.get('items');\r\n\r\n  if(getMura().renderMode != 'static' && scrollpages){\r\n    itemsTo=items.length;\r\n  } else {\r\n    if (maxItems < items.length && pos+nextn > maxItems){\r\n      itemsTo = maxItems;\r\n    }\r\n  }\r\n\r\n  for(let i = pos;i < itemsTo;i++) {\r\n    item = items[i];\r\n    itemsList.push(\r\n    <li key={item.get('contentid')}>\r\n        <h1>\r\n          <Link href={`/${item.get('filename')}`}>\r\n            {item.get('title')}\r\n          </Link>\r\n        </h1>\r\n        <OutputMarkup source={item.get('summary')}/>\r\n    </li>\r\n    );\r\n  }\r\n\r\n  return itemsList;\r\n}\r\n\r\n/*\r\n  This is not required; it is used to retrieve the required fields when populated getStatic/getServerSide props\r\n*/\r\nexport const getQueryProps = () => {\r\n  const data = {};\r\n  \r\n  /*\r\n    You wouldn't really need to set this because\r\n    both of these are available in the default field list\r\n  */\r\n  data['fields'] = \"title,summary\";\r\n\r\n  return data;\r\n};\r\n\r\nexport default CollectionLayout;","\r\nimport React from \"react\";\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faChevronRight } from '@fortawesome/free-solid-svg-icons'\r\n\r\nconst CollectionReadMoreBtn = (props) => {\r\n    const Link = props.link;\r\n    return (\r\n        <Link href={props.href} passHref className=\"stretched-link btn btn-primary\">{props.ctatext}  <FontAwesomeIcon icon={faChevronRight} /></Link>\r\n    )\r\n  }\r\n\r\nexport default CollectionReadMoreBtn;","import React from 'react';\r\n\r\nexport const ItemImage = function ({image,className,alt}){\r\n    const itemImage = image;\r\n    if(typeof itemImage != 'undefined' && itemImage){\r\n        return(\r\n            <img\r\n                src={itemImage}\r\n                alt={alt}\r\n                className={className}\r\n            />\r\n        )\r\n    }\r\n    return null;\r\n}\r\n\r\nexport default ItemImage;","import React, { useState } from \"react\";\r\nimport OutputMarkup from \"./OutputMarkup\";\r\nimport CollectionNav from './CollectionNav';\r\nimport ItemDate from './ItemDate';\r\nimport Accordion from \"react-bootstrap/Accordion\";\r\nimport Card from \"react-bootstrap/Card\";\r\nimport CollectionReadMoreBtn from \"./CollectionReadMoreBtn\";\r\nimport ItemCredits from './ItemCredits';\r\nimport ItemTags from './ItemTags';\r\nimport ItemImage from './ItemImage';\r\nimport { getMura } from '@murasoftware/next-core';\r\n/*\r\n  The link component throws an error when rerending after being \r\n  reconfigured in edit mode. Hence CollectionLink\r\n*/\r\n\r\nexport const CollectionLayoutAccordian = ({props,collection,setCollection,link}) => {\r\n  const [pos, setPos] = useState(0);\r\n  return (\r\n    <>\r\n      <Accordion className={`collectionLayoutAccordion ${props.accordionpadding}-spacing ${props.collapseindicators} ${props.collapseindicatorslocation}-indicator`}>\r\n        <CurrentItems collection={collection} pos={pos} link={link} {...props} /> \r\n      </Accordion>\r\n\r\n      <div className=\"row\">\r\n        <div className=\"col-12\">\r\n        <CollectionNav setCollection={setCollection} collection={collection} pos={pos} setPos={setPos} link={link} {...props} />\r\n        </div>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nconst CurrentItems = (props) => {\r\n  const {collection,nextn,link,pos,fields,scrollpages} = props;\r\n  let itemsList = [];\r\n  let item = '';\r\n  const Link = link;\r\n  const items = collection.get('items');\r\n  let itemsTo = pos+nextn > items.length ? items.length : pos+nextn;\r\n  const fieldlist = fields ? fields.toLowerCase().split(\",\") : [];\r\n  const maxItems = props.maxitems;\r\n  // console.log('fieldlist: ' + fieldlist);\r\n\r\n  if(getMura().renderMode != 'static' && scrollpages){\r\n    itemsTo=items.length;\r\n  } else {\r\n    if (maxItems < items.length && pos+nextn > maxItems){\r\n      itemsTo = maxItems;\r\n    }\r\n  }\r\n\r\n  const [activeId, setActiveId] = useState('0');\r\n\r\n  function toggleActive(id) {\r\n    if (activeId === id) {\r\n      setActiveId(null);\r\n    } else {\r\n      setActiveId(id);\r\n    }\r\n  }\r\n\r\n  // console.log(fieldlist);\r\n  //console.log(\"image size: \" + props.imagesize);\r\n\r\n  for(let i = pos;i < itemsTo;i++) {\r\n    item = items[i];\r\n    itemsList.push(\r\n      <Card key={item.get('contentid')}>\r\n        <Accordion.Toggle as={Card.Header} variant=\"link\" eventKey={item.get('contentid')} className={activeId === i ? 'open' : 'not-open'} onClick={() => toggleActive(i)} role=\"button\">\r\n          {item.get('title')}\r\n        </Accordion.Toggle>\r\n        <Accordion.Collapse eventKey={item.get('contentid')}>\r\n          <Card.Body>\r\n            {\r\n                fieldlist.map(field => {\r\n                  switch(field) {\r\n                    case \"image\":\r\n                        return(\r\n                          <ItemImage image={item.get('images')[props.imagesize]} className=\"img-fluid\" alt={item.get('title')} key=\"image\" />\r\n                        );\r\n                    case \"date\":\r\n                    case \"releasedate\":\r\n                        return (\r\n                          <div className=\"mura-item-meta__date\" key={field}>\r\n                            <ItemDate releasedate={item.get('releasedate')} lastupdate={item.get('lastupdate')}></ItemDate>\r\n                          </div>\r\n                        );\r\n                    case \"summary\":\r\n                      return <OutputMarkup source={item.get('summary')} key={field} />\r\n                    case \"readmore\":\r\n                          return (\r\n                            <CollectionReadMoreBtn\r\n                              href={`/${item.get('filename')}`}\r\n                              ctatext=\"Read More\"\r\n                              link={Link}\r\n                              key={field}\r\n                            />\r\n                          )\r\n                    case \"credits\":\r\n                        if(item.get('credits').length){\r\n                          return (\r\n                            <div className=\"mura-item-meta__credits\">\r\n                              <ItemCredits credits={item.get('credits')} key=\"credits\" />\r\n                            </div>\r\n                          );\r\n                        }\r\n                        return null;\r\n                    case \"tags\":\r\n                        return (\r\n                            <div className=\"mura-item-meta__tags pb-2\" key=\"tags\">\r\n                              <ItemTags tags={item.get('tags')} />\r\n                            </div>\r\n                        );\r\n                    default:\r\n                      return <div className={`mura-item-meta__${field}`} key={field} data-value={item.get(field)}>{item.get(field)}</div>\r\n                  }        \r\n                })\r\n            }\r\n          </Card.Body>\r\n        </Accordion.Collapse>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  return itemsList;\r\n}\r\n\r\n/*\r\n  This is not required; it is used to retrieve the required fields when populated getStatic/getServerSide props\r\n*/\r\nexport const getQueryProps = () => {\r\n  const data = {};\r\n  data['fields'] = \"title,summary\";\r\n\r\n  return data;\r\n};\r\n\r\nexport default CollectionLayoutAccordian;","import React, { useState } from \"react\";\r\nimport Card from 'react-bootstrap/Card';\r\nimport OutputMarkup from \"./OutputMarkup\";\r\nimport CollectionNav from './CollectionNav';\r\nimport ItemDate from './ItemDate';\r\nimport CollectionReadMoreBtn from \"./CollectionReadMoreBtn\";\r\nimport ItemCredits from './ItemCredits';\r\nimport ItemTags from './ItemTags';\r\nimport { getMura } from '@murasoftware/next-core';\r\n\r\n/*\r\n  The link component throws an error when rerending after being \r\n  reconfigured in edit mode. Hence CollectionLink\r\n*/\r\nconst AlternatingBoxes = ({props,collection,setCollection,link}) => {\r\n  const [pos, setPos] = useState(0);\r\n  return (\r\n    <>\r\n      <div className=\"collectionLayoutAlternatingBoxes\">\r\n          <CurrentItems collection={collection} pos={pos} link={link} {...props} /> \r\n      </div>\r\n      <div className=\"row\">\r\n        <div className=\"col-12\">\r\n        <CollectionNav setCollection={setCollection} collection={collection} pos={pos} setPos={setPos} link={link} {...props} />\r\n        </div>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nconst CurrentItems = (props) => {\r\n  const {collection,nextn,link,pos,fields,scrollpages} = props;\r\n  let itemsList = [];\r\n  let item = '';\r\n  const Link = link;\r\n  const items = collection.get('items');\r\n  let itemsTo = pos+nextn > items.length ? items.length : pos+nextn;\r\n  const fieldlist = fields ? fields.toLowerCase().split(\",\") : [];\r\n  const maxItems = props.maxitems;\r\n  // console.log('fieldlist: ' + fieldlist);\r\n\r\n  if(getMura().renderMode != 'static' && scrollpages){\r\n    itemsTo=items.length;\r\n  } else {\r\n    if (maxItems < items.length && pos+nextn > maxItems){\r\n      itemsTo = maxItems;\r\n    }\r\n  }\r\n  \r\n  for(let i = pos;i < itemsTo;i++) {\r\n    item = items[i];\r\n    itemsList.push(\r\n\r\n      <Card className=\"border-0\" key={item.get('contentid')}>\r\n        <div className=\"row no-gutters align-items-stretch\">\r\n          <div className={`col-12 col-md-6 ${i % 2 == 0 ? \"card-img-left\" : \"card-img-right  order-md-2\"}`}>\r\n            <Card.Img variant=\"top\" src={item.get('images')[props.imagesize]} className=\"rounded-0\" />\r\n          </div>\r\n          <div className=\"col-12 col-md-6 p-0\">\r\n            <Card.Body className=\"spacing-normal h-100\">\r\n              <div className=\"mura-item-meta\">\r\n                {\r\n                fieldlist.map(field => {\r\n                  switch(field) {\r\n                    case \"title\":\r\n                      return (\r\n                        <Card.Title key={field}>{item.get('title')}</Card.Title>\r\n                      )\r\n                    case \"date\":\r\n                    case \"releasedate\":\r\n                        return (\r\n                          <div className=\"mura-item-meta__date\" key=\"date\">\r\n                            <ItemDate releasedate={item.get('releasedate')} lastupdate={item.get('lastupdate')}></ItemDate>\r\n                          </div>\r\n                        );\r\n                    case \"summary\":\r\n                      return <OutputMarkup source={item.get('summary')} key={field} />\r\n                    case \"readmore\":\r\n                      return(\r\n                        <CollectionReadMoreBtn\r\n                          href={`/${item.get('filename')}`}\r\n                          ctatext=\"Read More\"\r\n                          link={Link}\r\n                          key={item.get('contentid')}\r\n                        />\r\n                      );\r\n                    case \"credits\":\r\n                        if(item.get('credits').length){\r\n                          return (\r\n                            <div className=\"mura-item-meta__credits\">\r\n                              <ItemCredits credits={item.get('credits')} key=\"credits\" />\r\n                            </div>\r\n                          );\r\n                        }\r\n                        return null;\r\n                    case \"tags\":\r\n                        return (\r\n                            <div className=\"mura-item-meta__tags pb-2\" key=\"tags\">\r\n                              <ItemTags tags={item.get('tags')} />\r\n                            </div>\r\n                        );\r\n                    default:\r\n                      return <div className={`mura-item-meta__${field}`} key={field} data-value={item.get(field)}>{item.get(field)}</div>\r\n                  }        \r\n                })\r\n                }\r\n                {\r\n                  !fieldlist.includes('readmore') &&\r\n                    <Link href={`/${item.get('filename')}`} className=\"stretched-link\"></Link>\r\n                }\r\n              </div>\r\n            </Card.Body>\r\n          </div>\r\n        </div>\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  return itemsList;\r\n}\r\n\r\n/*\r\n  This is not required; it is used to retrieve the required fields when populated getStatic/getServerSide props\r\n*/\r\nexport const getQueryProps = () => {\r\n  const data = {};\r\n  data['fields'] = \"title,summary\";\r\n\r\n  return data;\r\n};\r\n\r\nexport default AlternatingBoxes;","import React, { useState } from \"react\";\r\nimport Card from 'react-bootstrap/Card';\r\nimport OutputMarkup from \"./OutputMarkup\";\r\nimport CollectionNav from './CollectionNav';\r\nimport ItemDate from './ItemDate';\r\nimport CollectionReadMoreBtn from './CollectionReadMoreBtn';\r\nimport ItemCredits from './ItemCredits';\r\nimport ItemTags from './ItemTags';\r\nimport { getMura } from '@murasoftware/next-core';\r\n/*\r\n  The link component throws an error when rerending after being \r\n  reconfigured in edit mode. Hence CollectionLink\r\n*/\r\nconst AlternatingRows = ({props,collection,setCollection,link}) => {\r\n  const [pos, setPos] = useState(0);\r\n  return (\r\n    <>\r\n      <div className=\"collectionLayoutAlternatingBoxes\">\r\n          <CurrentItems collection={collection} pos={pos} link={link} {...props} /> \r\n      </div>\r\n      <div className=\"row\">\r\n        <div className=\"col-12\">\r\n        <CollectionNav setCollection={setCollection} collection={collection} pos={pos} setPos={setPos} link={link} {...props} />\r\n        </div>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nconst CurrentItems = (props) => {\r\n  const {collection,nextn,link,pos,fields,scrollpages} = props;\r\n  let itemsList = [];\r\n  let item = '';\r\n  const Link = link;\r\n  const items = collection.get('items');\r\n  let itemsTo = pos+nextn > items.length ? items.length : pos+nextn;\r\n  const fieldlist = fields ? fields.toLowerCase().split(\",\") : [];\r\n  const maxItems = props.maxitems;\r\n  // console.log('fieldlist: ' + fieldlist);\r\n\r\n  if(getMura().renderMode != 'static' && scrollpages){\r\n    itemsTo=items.length;\r\n  } else {\r\n    if (maxItems < items.length && pos+nextn > maxItems){\r\n      itemsTo = maxItems;\r\n    }\r\n  }\r\n  \r\n  for(let i = pos;i < itemsTo;i++) {\r\n    item = items[i];\r\n    itemsList.push(\r\n    \r\n    <div className=\"mb-4\" key={item.get('contentid')}>\r\n      <Card className=\"mb-3 h-100 shadow\">\r\n        <div className=\"row no-gutters align-items-stretch\">\r\n          <div className={`col-12 col-md-6 ${i % 2 == 0 ? \"card-img-left\" : \"card-img-right  order-md-2\"}`}>\r\n            <Card.Img variant=\"top\" src={item.get('images')[props.imagesize]} />\r\n          </div>\r\n          <div className=\"col-12 col-md-6 p-0\">\r\n            <Card.Body className=\"spacing-normal h-100\">\r\n              <div className=\"mura-item-meta\">\r\n                {\r\n                fieldlist.map(field => {\r\n                  switch(field) {\r\n                    case \"title\":\r\n                      return (\r\n                        <Card.Title key={field}>{item.get('title')}</Card.Title>\r\n                      )\r\n                    case \"date\":\r\n                    case \"releasedate\":\r\n                        return (\r\n                          <div className=\"mura-item-meta__date\" key=\"date\">\r\n                            <ItemDate releasedate={item.get('releasedate')} lastupdate={item.get('lastupdate')}></ItemDate>\r\n                          </div>\r\n                        );\r\n                    case \"summary\":\r\n                      return <OutputMarkup source={item.get('summary')} key={field} />\r\n                    case \"readmore\":\r\n                      return(\r\n                        <CollectionReadMoreBtn\r\n                          href={`/${item.get('filename')}`}\r\n                          ctatext=\"Read More\"\r\n                          link={Link}\r\n                          key={item.get('contentid')}\r\n                        />\r\n                      );\r\n                    case \"credits\":\r\n                        if(item.get('credits').length){\r\n                          return (\r\n                            <div className=\"mura-item-meta__credits\">\r\n                              <ItemCredits credits={item.get('credits')} key=\"credits\" />\r\n                            </div>\r\n                          );\r\n                        }\r\n                        return null;\r\n                    case \"tags\":\r\n                        return (\r\n                            <div className=\"mura-item-meta__tags pb-2\" key=\"tags\">\r\n                              <ItemTags tags={item.get('tags')} />\r\n                            </div>\r\n                        );\r\n                    default:\r\n                      return <div className={`mura-item-meta__${field}`} key={field} data-value={item.get(field)}>{item.get(field)}</div>\r\n                  }        \r\n                })\r\n                }\r\n                {\r\n                  !fieldlist.includes('readmore') &&\r\n                    <Link href={`/${item.get('filename')}`} className=\"stretched-link\"></Link>\r\n                }\r\n              </div>\r\n            </Card.Body>\r\n          </div>\r\n        </div>\r\n      </Card>\r\n    </div>\r\n    );\r\n  }\r\n\r\n  return itemsList;\r\n}\r\n\r\n/*\r\n  This is not required; it is used to retrieve the required fields when populated getStatic/getServerSide props\r\n*/\r\nexport const getQueryProps = () => {\r\n  const data = {};\r\n  data['fields'] = \"title,summary\";\r\n\r\n  return data;\r\n};\r\n\r\nexport default AlternatingRows;","import React from \"react\";\r\n\r\nexport const ItemCategories = (props) => {\r\n    const Categories = props.categories;\r\n    let catsList = [];\r\n    let cat = '';\r\n    let cats = Categories.items;\r\n    let Featuredonly = 0;\r\n    let hasnext = false;\r\n    const Parentcatname = props.parentcatname;\r\n\r\n    if (props.featuredonly == \"yes\"){\r\n        Featuredonly = 1;\r\n    }\r\n    // console.log('Featuredonly: ', Featuredonly);\r\n\r\n    //filter for featured categories\r\n    if(cats.length > 1 && Featuredonly){\r\n        const filteredCats = cats.filter(category => category.isfeature == 1);\r\n        if(filteredCats.length > 1){\r\n            cats = filteredCats[0];\r\n        } else {\r\n            cats = filteredCats;\r\n        }        \r\n    }\r\n    \r\n\r\n    if (cats && cats.length){\r\n        let catsTo = cats.length;\r\n\r\n        for(let i = 0;i < catsTo;i++) {\r\n          cat = cats[i];\r\n          hasnext = i+1 < catsTo;\r\n          \r\n          catsList.push(\r\n              <span key={cat.categoryid}>{cat.categoryname}{hasnext && `, ` }</span>\r\n          ) \r\n        }\r\n    }\r\n    return catsList\r\n}\r\n\r\nexport default ItemCategories;","import React from 'react';\r\n\r\nfunction CheckForItems() {\r\n    return(\r\n        <div className=\"alert alert-warning\">No results to display.</div>\r\n    )\r\n}\r\n\r\nexport default CheckForItems;","import React, { useState } from \"react\";\r\nimport Card from 'react-bootstrap/Card';\r\nimport OutputMarkup from \"./OutputMarkup\";\r\nimport CollectionNav from './CollectionNav';\r\nimport ItemDate from './ItemDate';\r\nimport CollectionReadMoreBtn from './CollectionReadMoreBtn';\r\nimport ItemCategories from './ItemCategories';\r\nimport NoItemsMessage from './NoItemsMessage';\r\nimport { getMura } from '@murasoftware/next-core';\r\n/*\r\n  The link component throws an error when rerending after being \r\n  reconfigured in edit mode. Hence CollectionLink\r\n*/\r\nconst Cards = ({props,collection,setCollection,link}) => {\r\n  const [pos, setPos] = useState(0);\r\n  if (!collection.properties.totalpages){\r\n    return(\r\n      <NoItemsMessage />\r\n    )\r\n  }  \r\n\r\n  return (\r\n    <>\r\n      <div className={`row collectionLayoutCards row-cols-1 row-cols-sm-${props.rowcolssm} row-cols-md-${props.rowcolsmd} row-cols-lg-${props.rowcolslg} row-cols-xl-${props.rowcolsxl}`}>\r\n          <CurrentItems collection={collection} pos={pos} link={link} {...props} /> \r\n      </div>\r\n      <div className=\"row\">\r\n        <div className=\"col-12\">\r\n        <CollectionNav setCollection={setCollection} collection={collection} pos={pos} setPos={setPos} link={link} {...props} />\r\n        </div>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nconst CurrentItems = (props) => {\r\n  const {collection,nextn,link,pos,fields,scrollpages} = props;\r\n  let itemsList = [];\r\n  let item = '';\r\n  const Link = link;\r\n  const items = collection.get('items');\r\n  let itemsTo = pos+nextn > items.length ? items.length : pos+nextn;\r\n  const fieldlist = fields ? fields.toLowerCase().split(\",\") : [];\r\n  const maxItems = props.maxitems;\r\n  // console.log('fieldlist: ' + fieldlist);\r\n  // console.log('props.showcategories: ', props.showcategories);\r\n  // console.log('props.featuredcategoriesonly: ', props.featuredcategoriesonly);\r\n  let catAssignments = [];\r\n\r\n  if(getMura().renderMode != 'static' && scrollpages){\r\n    itemsTo=items.length;\r\n  } else {\r\n    if (maxItems < items.length && pos+nextn > maxItems){\r\n      itemsTo = maxItems;\r\n    }\r\n  }\r\n\r\n  for(let i = pos;i < itemsTo;i++) {\r\n    item = items[i];\r\n    //categoryassignments require the feed to be expanded to include them\r\n    //the feed in resource hub is expanded but collection is not\r\n    catAssignments = item.getAll().categoryassignments;\r\n    \r\n    itemsList.push(    \r\n    <div className=\"col mb-4\" key={item.get('contentid')}>\r\n      <Card className=\"mb-3 h-100 shadow\">\r\n        {\r\n          fieldlist.filter(field => field == 'image').map(filteredField => (\r\n            <Card.Img variant=\"top\" src={item.get('images')[props.imagesize]} key={item.get('fileid')} />\r\n          ))\r\n        }\r\n        <Card.Body>\r\n          <div className=\"mura-item-meta\">\r\n            {\r\n            fieldlist.map(field => {\r\n              switch(field) {\r\n                case \"title\":\r\n                  return (\r\n                    <Card.Title key={field}>{item.get('title')}</Card.Title>\r\n                  )\r\n                case \"date\":\r\n                case \"releasedate\":\r\n                    return (\r\n                      <div className=\"mura-item-meta__date\" key={`date${item.get('contentid')}`}>\r\n                        <ItemDate releasedate={item.get('releasedate')} lastupdate={item.get('lastupdate')}></ItemDate>\r\n                      </div>\r\n                    );\r\n                case \"summary\":\r\n                  return <OutputMarkup source={item.get('summary')} key={field} />\r\n                default:\r\n                  return <div className={`mura-item-meta__${field}`} key={field} data-value={item.get(field)}>{item.get(field)}</div>\r\n              }        \r\n            })\r\n            }\r\n          </div>\r\n          {\r\n            !fieldlist.includes('readmore') &&\r\n              <Link href={`/${item.get('filename')}`} className=\"stretched-link\"></Link>\r\n          }\r\n        </Card.Body>\r\n        {(fieldlist.includes('readmore') || (catAssignments && props.showcategories)) &&\r\n        <Card.Footer>\r\n        {\r\n          fieldlist.includes('readmore') &&\r\n            <CollectionReadMoreBtn\r\n              href={`/${item.get('filename')}`}\r\n              ctatext=\"Read More\"\r\n              link={Link}\r\n              key={item.get('contentid')}\r\n            />\r\n        }       \r\n          \r\n          {catAssignments && props.showcategories &&\r\n            <>\r\n              <hr />\r\n              <Card.Text key=\"categories\">\r\n                <ItemCategories \r\n                  categories={catAssignments}\r\n                  featuredonly={props.featuredcategoriesonly}\r\n                />\r\n              </Card.Text>\r\n            </>\r\n          }\r\n        </Card.Footer>\r\n        }\r\n      </Card>\r\n    </div>\r\n    );\r\n  }\r\n  return itemsList;\r\n}\r\n\r\n/*\r\n  This is not required; it is used to retrieve the required fields when populated getStatic/getServerSide props\r\n*/\r\nexport const getQueryProps = () => {\r\n  const data = {};\r\n  data['fields'] = \"title,summary\";\r\n\r\n  return data;\r\n};\r\n\r\nexport default Cards;","import React, { useState } from \"react\";\r\nimport OutputMarkup from \"./OutputMarkup\";\r\nimport CollectionNav from './CollectionNav';\r\nimport ItemDate from './ItemDate';\r\nimport CollectionReadMoreBtn from './CollectionReadMoreBtn';\r\nimport ItemCredits from './ItemCredits';\r\nimport ItemTags from './ItemTags';\r\nimport ItemImage from './ItemImage';\r\nimport { getMura } from '@murasoftware/next-core';\r\n\r\n/*\r\n  The link component throws an error when rerending after being \r\n  reconfigured in edit mode. Hence CollectionLink\r\n*/\r\nconst List = ({props,collection,setCollection,link}) => {\r\n  const [pos, setPos] = useState(0);\r\n  return (\r\n    <div className=\"collectionLayoutList\">\r\n      <CurrentItems collection={collection} pos={pos} link={link} {...props} /> \r\n      \r\n      <div className=\"row\">\r\n        <div className=\"col-12\">\r\n        <CollectionNav setCollection={setCollection} collection={collection} pos={pos} setPos={setPos} link={link} {...props} />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst CurrentItems = (props) => {\r\n  const {collection,nextn,link,pos,fields,scrollpages} = props;\r\n  let itemsList = [];\r\n  let item = '';\r\n  const Link = link;\r\n  const items = collection.get('items');\r\n  let itemsTo = pos+nextn > items.length ? items.length : pos+nextn;\r\n  const fieldlist = fields ? fields.toLowerCase().split(\",\") : [];\r\n  const maxItems = props.maxitems;\r\n  // console.log('fieldlist: ' + fieldlist);\r\n\r\n  if(getMura().renderMode != 'static' && scrollpages){\r\n    itemsTo=items.length;\r\n  } else {\r\n    if (maxItems < items.length && pos+nextn > maxItems){\r\n      itemsTo = maxItems;\r\n    }\r\n  }\r\n  \r\n  for(let i = pos;i < itemsTo;i++) {\r\n    item = items[i];\r\n    // console.log(item);\r\n\r\n    itemsList.push(\r\n      <div className=\"row mb-3\" key={item.get('contentid')}>\r\n        <ListImage fieldlist={fieldlist} item={item} imagesize={props.imagesize} />\r\n        <ListMeta fieldlist={fieldlist} item={item} Link={Link} />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return itemsList;\r\n}\r\n\r\nconst ListImage = (props) => {\r\n  const {fieldlist, item} = props;\r\n\r\n  let hasImage = false;\r\n  if (fieldlist.indexOf(\"image\") > -1) {\r\n    hasImage = true;\r\n  }\r\n  if(hasImage) {\r\n    const imagesize= props.imagesize || 'medium';\r\n    return(\r\n      <div className=\"col-12 col-md-3 mb-3 pr-md-0\">\r\n          <ItemImage image={item.get('images')[imagesize]} className=\"img-fluid\" alt={item.get('title')} key=\"image\" />\r\n      </div>\r\n    )  \r\n  }\r\n  return(\r\n    <></>\r\n  )\r\n}\r\n\r\nconst ListMeta = (props) => {\r\n  const {fieldlist, item, Link} = props;\r\n\r\n  let hasImage = false;\r\n  if (fieldlist.indexOf(\"image\") > -1) {\r\n    hasImage = true;\r\n  }\r\n\r\n  let isLink = false;\r\n  if (item.get('type') === \"Link\") {\r\n    isLink = true;\r\n  }\r\n  // console.log(item.get('type'));\r\n  return(\r\n    <div className={hasImage ? 'col-12 col-md-9 py-3' : 'col-12 py-3'}>\r\n        <div className=\"mura-item-meta\">\r\n        {\r\n            fieldlist.map(field => {\r\n              switch(field) {\r\n                case \"title\":\r\n                  return (\r\n                    <div className=\"mura-item-meta__title\" key={item.get('field')}>\r\n                      <h3>{item.get('title')}</h3>\r\n                    </div>\r\n                  )\r\n                case \"date\":\r\n                case \"releasedate\":\r\n                    return (\r\n                      <div className=\"mura-item-meta__date\" key=\"date\">\r\n                        <ItemDate releasedate={item.get('releasedate')} lastupdate={item.get('lastupdate')}></ItemDate>\r\n                      </div>\r\n                    );\r\n                case \"summary\":\r\n                  return <OutputMarkup source={item.get('summary')} key={field} />\r\n                case \"readmore\":\r\n                      return (\r\n                        <div className=\"mura-item-meta__readmore\" key={field}>\r\n                          <CollectionReadMoreBtn\r\n                            href={`/${item.get('filename')}`}\r\n                            ctatext=\"Read More\"\r\n                            link={Link}\r\n                            key={item.get('contentid')}\r\n                          />\r\n                        </div>\r\n                      )\r\n                case \"credits\":\r\n                    if(item.get('credits').length){\r\n                      return (\r\n                        <div className=\"mura-item-meta__credits\">\r\n                          <ItemCredits credits={item.get('credits')} key=\"credits\" />\r\n                        </div>\r\n                      );\r\n                    }\r\n                    return null;\r\n                case \"tags\":\r\n                    return (\r\n                        <div className=\"mura-item-meta__tags pb-2\" key=\"tags\">\r\n                          <ItemTags tags={item.get('tags')} />\r\n                        </div>\r\n                    );\r\n                default:\r\n                  return <div className={`mura-item-meta__${field}`} key={field} data-value={item.get(field)}>{item.get(field)}</div>\r\n              }        \r\n            })\r\n        }\r\n        {\r\n          !fieldlist.includes('readmore') &&\r\n            <Link href={`/${item.get('filename')}`} className=\"stretched-link\"></Link>\r\n        }\r\n        </div>\r\n      </div>\r\n  )\r\n}\r\n/*\r\n  This is not required; it is used to retrieve the required fields when populated getStatic/getServerSide props\r\n*/\r\nexport const getQueryProps = (item) => {\r\n  const data = {};\r\n  data['fields'] = \"\";\r\n\r\n  return data;\r\n};\r\n\r\nexport default List;","import React, { useState } from \"react\";\r\nimport Card from 'react-bootstrap/Card';\r\nimport OutputMarkup from \"./OutputMarkup\";\r\nimport CollectionNav from './CollectionNav';\r\nimport ItemDate from './ItemDate';\r\nimport CollectionReadMoreBtn from './CollectionReadMoreBtn';\r\nimport ItemCredits from './ItemCredits';\r\nimport ItemTags from './ItemTags';\r\nimport { getMura } from '@murasoftware/next-core';\r\n\r\n/*\r\n  The link component throws an error when rerending after being \r\n  reconfigured in edit mode. Hence CollectionLink\r\n*/\r\nconst Masonry = ({props,collection,setCollection,link}) => {\r\n  const [pos, setPos] = useState(0);\r\n  return (\r\n    <>\r\n      <div className={`collectionLayoutMasonry card-columns`}>\r\n          <CurrentItems collection={collection} pos={pos} link={link} {...props} /> \r\n      </div>\r\n      <div className=\"row\">\r\n        <div className=\"col-12\">\r\n        <CollectionNav setCollection={setCollection} collection={collection} pos={pos} setPos={setPos} link={link} {...props} />\r\n        </div>\r\n      </div>\r\n    </>\r\n  )\r\n}\r\n\r\nconst CurrentItems = (props) => {\r\n  const {collection,nextn,link,pos,fields,scrollpages} = props;\r\n  let itemsList = [];\r\n  let item = '';\r\n  const Link = link;\r\n  const items = collection.get('items');\r\n  let itemsTo = pos+nextn > items.length ? items.length : pos+nextn;\r\n  const fieldlist = fields ? fields.toLowerCase().split(\",\") : [];\r\n  const maxItems = props.maxitems;\r\n  // console.log('fieldlist: ' + fieldlist);\r\n\r\n  if(getMura().renderMode != 'static' && scrollpages){\r\n    itemsTo=items.length;\r\n  } else {\r\n    if (maxItems < items.length && pos+nextn > maxItems){\r\n      itemsTo = maxItems;\r\n    }\r\n  }\r\n  \r\n  for(let i = pos;i < itemsTo;i++) {\r\n    item = items[i];\r\n    itemsList.push(\r\n      \r\n      <Card className=\"mb-3 h-100 shadow\" key={item.get('contentid')}>\r\n        {\r\n          fieldlist.filter(field => field == 'image').map(filteredField => (\r\n            <Card.Img variant=\"top\" src={item.get('images')[props.imagesize]} key={item.get('fileid')} />\r\n          ))\r\n        }\r\n        <Card.Body>\r\n          <div className=\"mura-item-meta\">\r\n            {\r\n            fieldlist.map(field => {\r\n              switch(field) {\r\n                case \"title\":\r\n                  return (\r\n                    <Card.Title key={field}>{item.get('title')}</Card.Title>\r\n                  )\r\n                case \"date\":\r\n                case \"releasedate\":\r\n                    return (\r\n                      <div className=\"mura-item-meta__date\" key=\"date\">\r\n                        <ItemDate releasedate={item.get('releasedate')} lastupdate={item.get('lastupdate')}></ItemDate>\r\n                      </div>\r\n                    );\r\n                case \"summary\":\r\n                  return <OutputMarkup source={item.get('summary')} key={field} />\r\n                case \"credits\":\r\n                    if(item.get('credits').length){\r\n                      return (\r\n                        <div className=\"mura-item-meta__credits\">\r\n                          <ItemCredits credits={item.get('credits')} key=\"credits\" />\r\n                        </div>\r\n                      );\r\n                    }\r\n                    return null;\r\n                case \"tags\":\r\n                    return (\r\n                        <div className=\"mura-item-meta__tags pb-2\" key=\"tags\">\r\n                          <ItemTags tags={item.get('tags')} />\r\n                        </div>\r\n                    );\r\n                default:\r\n                  return <div className={`mura-item-meta__${field}`} key={field} data-value={item.get(field)}>{item.get(field)}</div>\r\n              }        \r\n            })\r\n            }\r\n          </div>\r\n          {\r\n            !fieldlist.includes('readmore') &&\r\n              <Link href={`/${item.get('filename')}`} className=\"stretched-link\"></Link>\r\n          }\r\n        </Card.Body>\r\n        { fieldlist.includes('readmore') &&\r\n          <Card.Footer>\r\n            <CollectionReadMoreBtn\r\n              href={`/${item.get('filename')}`}\r\n              ctatext=\"Read More\"\r\n              link={Link}\r\n              key={item.get('contentid')}\r\n            />\r\n          </Card.Footer>\r\n        }\r\n\r\n      </Card>\r\n    );\r\n  }\r\n\r\n  return itemsList;\r\n}\r\n\r\n/*\r\n  This is not required; it is used to retrieve the required fields when populated getStatic/getServerSide props\r\n*/\r\nexport const getQueryProps = () => {\r\n  const data = {};\r\n  data['fields'] = \"title,summary\";\r\n\r\n  return data;\r\n};\r\n\r\nexport default Masonry;","import React, { useState } from \"react\";\r\nimport Card from 'react-bootstrap/Card';\r\nimport OutputMarkup from \"./OutputMarkup\";\r\nimport ItemDate from './ItemDate';\r\nimport CollectionReadMoreBtn from './CollectionReadMoreBtn';\r\nimport ItemCredits from './ItemCredits';\r\nimport ItemTags from './ItemTags';\r\n\r\nimport Slider from \"react-slick\";\r\n\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faChevronRight, faChevronLeft } from '@fortawesome/free-solid-svg-icons'\r\n/*\r\n  The link component throws an error when rerending after being \r\n  reconfigured in edit mode. Hence CollectionLink\r\n*/\r\n\r\nconst SlickSlider = ({props,collection,link}) => {\r\n\r\n  function CustomNextArrow(props) {\r\n    const { className, style, onClick } = props;\r\n    return (\r\n      <div\r\n        className={className}\r\n        onClick={onClick}\r\n      >\r\n        <FontAwesomeIcon icon={faChevronRight} />\r\n      </div>\r\n    );\r\n  }\r\n  \r\n  function CustomPrevArrow(props) {\r\n    const { className, style, onClick } = props;\r\n    return (\r\n      <div\r\n        className={className}\r\n        onClick={onClick}\r\n      >\r\n        <FontAwesomeIcon icon={faChevronLeft} />\r\n      </div>\r\n    );    \r\n  }  \r\n  \r\n  const slides = collection.map((item) => (\r\n      <SliderItem \r\n        sliderimage={item.get('images')[props.imagesize]}\r\n        imagesize={props.imagesize}\r\n        item={item}\r\n        link={link}\r\n        slidestoshow={Number(props.slidestoshow)}\r\n        {...props}\r\n        key={item.get('contentid')}\r\n      />\r\n  ))\r\n  \r\n  //console.log('slidesToShow: ' + props.slidestoshow + ' slidesToScroll: ' + props.slidestoscroll + ' objectID: ' + props.objectid);\r\n  // var slickSettings = {\r\n  //   dots: {props.dots},\r\n  //   arrows: {props.arrows},\r\n  //   infinite: {props.infinite},\r\n  //   speed: {Number(props.speed)},\r\n  //   slidesToShow:{Number(props.slidestoshow)},\r\n  //   slidesToScroll: {Number(props.slidestoshow)},\r\n  //   autoplay: {props.autoplay},\r\n  //   autoplaySpeed: {Number(props.autoplayspeed)},\r\n  //   lazyLoad: {props.lazyload},\r\n  //   vertical: {props.vertical},\r\n  //   verticalSwiping: {props.verticalswiping},\r\n  //   responsive={[\r\n  //     {\r\n  //       breakpoint: 0,\r\n  //       settings: {\r\n  //         slidesToShow: 1,\r\n  //         slidesToScroll: 1\r\n  //       }\r\n  //     },\r\n  //     {\r\n  //       breakpoint: 576,\r\n  //       settings: {\r\n  //         slidesToShow: 2,\r\n  //         slidesToScroll: 2\r\n  //       }\r\n  //     },\r\n  //     {\r\n  //       breakpoint: 992,\r\n  //       settings: {\r\n  //         slidesToShow: Number(props.slidestoshow),\r\n  //         slidesToScroll: Number(props.slidestoshow)\r\n  //       }\r\n  //     }\r\n  //   ]},\r\n  //   nextArrow: {<CustomNextArrow />},\r\n  //   prevArrow: {<CustomPrevArrow />}\r\n  // }\r\n  return (\r\n      slides != null && slides.length > 0 &&\r\n      <div className={`collectionLayoutSlickSlider ${props.sliderlayout}`}>\r\n        <Slider \r\n          dots={props.dots}\r\n          arrows={props.arrows}\r\n          infinite={props.infinite}\r\n          speed={Number(props.speed)}\r\n          slidesToShow={Number(props.slidestoshow)}\r\n          slidesToScroll={Number(props.slidestoshow)}\r\n          autoplay={props.autoplay}\r\n          autoplaySpeed={Number(props.autoplayspeed)}        \r\n          lazyLoad={props.lazyload}\r\n          vertical={props.vertical}\r\n          verticalSwiping={props.verticalswiping}\r\n          fade={props.fade}\r\n          centerMode={props.centermode}\r\n          centerPadding={props.centerpadding}\r\n          responsive={[\r\n            {\r\n              breakpoint: 0,\r\n              settings: {\r\n                slidesToShow: 1,\r\n                slidesToScroll: 1\r\n              }\r\n            },\r\n            {\r\n              breakpoint: 576,\r\n              settings: {\r\n                slidesToShow: 2,\r\n                slidesToScroll: 2\r\n              }\r\n            },\r\n            {\r\n              breakpoint: 992,\r\n              settings: {\r\n                slidesToShow: Number(props.slidestoshow),\r\n                slidesToScroll: Number(props.slidestoshow)\r\n              }\r\n            }\r\n          ]}\r\n          nextArrow={<CustomNextArrow />}\r\n          prevArrow={<CustomPrevArrow />}\r\n          key={props.objectid}\r\n        >\r\n        {slides}\r\n      </Slider>\r\n      </div>\r\n      // these are causing an error: slidesPerRow={props.slidesperrow} rows={props.rows} \r\n  )\r\n}\r\n\r\nconst SliderItem = (props) => {\r\n  const item = props.item;\r\n  const slidesToShow = props.slidesToShow;\r\n  const Link = props.link;\r\n  const fieldlist = props.fields ? props.fields.toLowerCase().split(\",\") : [];\r\n  // console.log('image size: ' + props.imagesize);\r\n  if (props.sliderlayout === 'banner') {//swith to props.layout\r\n    return(\r\n      <div key={item.get('contentid')} className=\"h-100 position-relative\">\r\n        <Link href={`/${item.get('filename')}`} passHref>\r\n          <img src={props.sliderimage} />\r\n        </Link>\r\n        <div className=\"mura-item-meta\">\r\n                {\r\n                fieldlist.map(field => {\r\n                  switch(field) {\r\n                    case \"title\":\r\n                      return (\r\n                        <div className=\"mura-item-meta__title\" key={field}>{item.get('title')}</div>\r\n                      )\r\n                    case \"date\":\r\n                    case \"releasedate\":\r\n                        return (\r\n                          <div className=\"mura-item-meta__date\" key={item.get('releasedate')}>\r\n                            <ItemDate releasedate={item.get('releasedate')} lastupdate={item.get('lastupdate')}></ItemDate>\r\n                          </div>\r\n                        );\r\n                    case \"summary\":\r\n                      return <OutputMarkup className=\"mura-item-meta__summary\" source={item.get('summary')} key={field} />\r\n                    case \"readmore\":\r\n                      return(\r\n                        <div className=\"mura-item-meta__readmore\" key={item.get('contentid')}>\r\n                          <CollectionReadMoreBtn\r\n                            href={`/${item.get('filename')}`}\r\n                            ctatext=\"Read More\"\r\n                            link={Link}\r\n                            key={item.get('contentid')}\r\n                          />\r\n                        </div>\r\n                      );\r\n                    case \"credits\":\r\n                        if(item.get('credits').length){\r\n                          return (\r\n                            <div className=\"mura-item-meta__credits\">\r\n                              <ItemCredits credits={item.get('credits')} key=\"credits\" />\r\n                            </div>\r\n                          );\r\n                        }\r\n                        return null;\r\n                    case \"tags\":\r\n                        return (\r\n                            <div className=\"mura-item-meta__tags pb-2\" key=\"tags\">\r\n                              <ItemTags tags={item.get('tags')} />\r\n                            </div>\r\n                        );\r\n                    default:\r\n                      return <div className={`mura-item-meta__${field}`} key={field} data-value={item.get(field)}>{item.get(field)}</div>\r\n                  }        \r\n                })\r\n                }\r\n              </div>\r\n      </div>\r\n    )\r\n  } else {\r\n    return(\r\n      <div className=\"mx-2 h-100\" key={props.contentid} >\r\n        <Card className=\"h-100\">\r\n          {\r\n            fieldlist.filter(field => field == 'image').map(filteredField => (\r\n              <Card.Img variant=\"top\" src={item.get('images')[props.imagesize]} key={filteredField} />\r\n            ))\r\n          }          \r\n          <Card.Body className=\"spacing-normal h-100\">\r\n              <div className=\"mura-item-meta\">\r\n                {\r\n                fieldlist.map(field => {\r\n                  switch(field) {\r\n                    case \"title\":\r\n                      return (\r\n                        <Card.Title key={field}>{item.get('title')}</Card.Title>\r\n                      )\r\n                    case \"date\":\r\n                    case \"releasedate\":\r\n                        return (\r\n                          <div className=\"mura-item-meta__date\" key=\"date\">\r\n                            <ItemDate releasedate={item.get('releasedate')} lastupdate={item.get('lastupdate')}></ItemDate>\r\n                          </div>\r\n                        );\r\n                    case \"summary\":\r\n                      return <OutputMarkup source={item.get('summary')} key={field} />\r\n                    case \"readmore\":\r\n                      return(\r\n                        <CollectionReadMoreBtn\r\n                          href={`/${item.get('filename')}`}\r\n                          ctatext=\"Read More\"\r\n                          link={Link}\r\n                          key={item.get('contentid')}\r\n                        />\r\n                      );\r\n                    default:\r\n                      return <div className={`mura-item-meta__${field}`} key={field} data-value={item.get(field)}>{item.get(field)}</div>\r\n                  }        \r\n                })\r\n                }\r\n              </div>\r\n            </Card.Body>\r\n        </Card>\r\n      </div>   \r\n    )\r\n  }\r\n\r\n  \r\n\r\n}\r\n\r\n/*\r\n  This is not required; it is used to retrieve the required fields when populated getStatic/getServerSide props\r\n*/\r\nexport const getQueryProps = () => {\r\n  const data = {};\r\n  data['fields'] = \"title,summary\";\r\n\r\n  return data;\r\n};\r\n\r\nexport default SlickSlider;","import React, {useEffect} from 'react';\r\nimport Mura from 'mura.js/src/core/core';\r\n\r\n// eslint-disable-next-line\r\nimport { getComponent } from '@murasoftware/next-core';\r\nimport { Decorator } from '@murasoftware/next-core';\r\n\r\nexport const Container = function(props) {\r\n  const { items,content,instanceid } = props;\r\n  // console.log('Container -> items', items);\r\n  // console.log('Container -> props', props);\r\n  if (!items) return '';\r\n\r\n  useEffect(() => {\r\n    if(typeof Mura.displayObjectInstances[instanceid]=='undefined'){\r\n      Mura.displayObjectInstances[instanceid]= new Mura.DisplayObject.Container(props);\r\n    }\r\n  }, []);\r\n\r\n  let $items=items;\r\n\r\n  if(!Array.isArray($items)){\r\n    try{\r\n      $items=JSON.parse($items);\r\n    } catch(e){\r\n      $items=[];\r\n    }\r\n  }\r\n\r\n  const resetInstanceIds=(_items)=>{\r\n    _items.forEach((item)=>{\r\n      item.instanceid=Mura.createUUID();\r\n      if(item.object=='container' && item.items){\r\n        let $items=item.items;\r\n       if(!Array.isArray($items)){\r\n          try{\r\n            $items=JSON.parse($items);\r\n          } catch(e){\r\n            $items=[];\r\n          }\r\n        }\r\n        item.items=resetInstanceIds($items);\r\n      }\r\n    })\r\n    return _items;\r\n  }\r\n\r\n  if(Mura.cloning){\r\n    $items=$items.map(function(i){return i;});\r\n    resetInstanceIds($items);\r\n  }\r\n\r\n  return ($items.map(item => {\r\n          const obj=Object.assign({},item);\r\n          obj.key=obj.instanceid;\r\n          obj.moduleStyleData=props.moduleStyleData;\r\n          obj.content = content;\r\n          return (<Decorator {...obj}> {getComponent(obj)} </Decorator>)\r\n      })\r\n   \r\n  );\r\n}\r\n\r\nexport default Container;\r\n","import React from 'react';\r\n\r\nconst Hr = function(props) {\r\n    return (\r\n      <hr />\r\n    );\r\n  \r\n}\r\n\r\nexport default Hr;\r\n","import React from 'react';\r\nimport Link from 'next/link';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faChevronRight } from '@fortawesome/free-solid-svg-icons'\r\n\r\nexport const CTAButton = ({buttontext,buttoncolor,buttonsize,buttonlink,buttontarget,buttonblock}) => {\r\n\r\n  var btnclass = `btn btn-${buttoncolor||'primary'}`;\r\n  if (buttonsize != 'md'){\r\n    btnclass = btnclass + ` btn-${buttonsize}`;\r\n  }\r\n  if (buttonblock){\r\n    btnclass = btnclass + ` btn-block`;\r\n  }\r\n\r\n  return (\r\n    <>\r\n        <Link href={buttonlink||'https://www.murasoftware.com'} passHref>\r\n          <a target={buttontarget||'_self'} className={btnclass} role=\"button\">{buttontext || 'Press Me'} <FontAwesomeIcon icon={faChevronRight} /></a>\r\n        </Link>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default CTAButton;","import Mura from 'mura.js';\r\nimport React,{ useEffect } from 'react';\r\n\r\nconst Embed = function(props) {\r\n  let objectparams=Object.assign({},props);\r\n  objectparams.source=objectparams.source || '';\r\n  const containerid='source-contianer-' + objectparams.instanceid;\r\n\r\n  useEffect(() => {\r\n    Mura('#'  + containerid).html(objectparams.source);\r\n  }, []);\r\n\r\n  return (\r\n    <div id={containerid}/>\r\n  )\r\n}\r\n\r\nexport default Embed;\r\n","import React from 'react';\r\nimport OutputMarkup from \"./OutputMarkup\";\r\n\r\nconst Image =function(props) {\r\n  let objectparams = Object.assign({},props);\r\n  objectparams=objectparams || {};\r\n\tobjectparams.src=objectparams.src||'';\r\n\tobjectparams.alt=objectparams.alt||'';\r\n\tobjectparams.caption=objectparams.caption||'';\r\n\tobjectparams.imagelink=objectparams.imagelink||'';\r\n  objectparams.fit=objectparams.fit||'';\r\n  objectparams.imagelinktarget=objectparams.imagelinktarget||'';\r\n\r\n  if(typeof objectparams.imagelinktarget==='string' && objectparams.imagelinktarget.toLowerCase()==='no'){\r\n    objectparams.imagelinktarget=\"\";\r\n  }\r\n\r\n\tif(!objectparams.src){\r\n\t\treturn '';\r\n\t}\r\n\r\n  if(objectparams.imagelink){\r\n    return (\r\n      <figure>\r\n        <a href={objectparams.imagelink} target={objectparams.imagelinktarget}>\r\n          <Img {...objectparams} />\r\n        </a>\r\n        <FigCaption {...objectparams} />\r\n      </figure>\r\n  );\r\n  } else {\r\n    return (\r\n      <figure style={{margin:\"0px\"}}>\r\n         <Img {...objectparams} />\r\n        <FigCaption {...objectparams} />\r\n      </figure>\r\n  );\r\n  }\r\n \r\n}\r\n\r\nconst FigCaption = ({caption}) => {\r\n  if(caption && caption != '<p></p>'){\r\n    return (\r\n      <figcaption><OutputMarkup source={caption} /></figcaption>\r\n    );\r\n  } else {\r\n    return '';\r\n  }\r\n}\r\n\r\nconst Img = (props) => {\r\n  if(props.fit){\r\n    return (\r\n      <img src={props.src} alt={props.alt} loading=\"lazy\" style={{height:\"100%\",width:\"100%\",objectFit:props.fit}} data-object-fit={props.fit} />\r\n    );\r\n  } else {\r\n    return (\r\n      <img src={props.src} alt={props.alt} loading=\"lazy\" />\r\n    )\r\n  }\r\n \r\n}\r\n\r\n\r\nexport default Image;\r\n","import React, { useEffect } from 'react';\r\n/* \r\n    This is not being used yet\r\n\r\n    steps to use:\r\n        1. Set external:true or remove the attribute from the mura.config.json\r\n        2. Remove the comment from the mura/react/Login import in the mura.config.js\r\n        3. Add the component to the moduleRegistry \"login\" item in the mura.config.js\r\n        4. Update the MuraMinimal theme login module to be this.SSR aware\r\n        5. docker-compose up --build\r\n*/\r\n\r\nfunction Login(props) {\r\n\r\n    useEffect(() => {\r\n      Mura('div.mura-object[data-instanceid=\"'  + props.instanceid + '\"]').processDisplayObject();\r\n    }, []);\r\n\r\n    return (\r\n      <h3>Login</h3>\r\n    );\r\n  \r\n}\r\n\r\nexport default Login;\r\n","import React,{useState,useEffect} from 'react';\r\nimport Form from 'react-bootstrap/Form';\r\nimport Button from 'react-bootstrap/Button';\r\nimport Alert from 'react-bootstrap/Alert';\r\nimport Mura from 'mura.js';\r\nimport { faBolt } from '@fortawesome/free-solid-svg-icons';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\n\r\nfunction MatrixSelector(props){\r\n    const objectparams = Object.assign({}, props);\r\n\r\n    const _personaIds = objectparams.dynamicProps ? objectparams.dynamicProps.personaProps : '';\r\n    const _stageIds = objectparams.dynamicProps ? objectparams.dynamicProps.stageProps : '';\r\n\r\n    const [personaIds, setPersonaIds] = useState(_personaIds);\r\n    const [stageIds, setStageIds] = useState(_stageIds);\r\n\r\n    const _selfIdStart = objectparams.selfidstart ? objectparams.selfidstart : 'I want to learn about';\r\n    const _selfIdMiddle = objectparams.selfidmiddle ? objectparams.selfidmiddle : 'for my company, or about the';\r\n    const _selfIdEnd = objectparams.selfidend ? objectparams.selfidend : 'industry.';\r\n    const _displayType = objectparams.displaytype ? objectparams.displaytype : 'inline';\r\n\r\n    const [selfIdStart, setSelfIdStart] = useState(_selfIdStart);\r\n    const [selfIdMiddle, setSelfIdMiddle] = useState(_selfIdMiddle);\r\n    const [selfIdEnd, setSelfIdEnd] = useState(_selfIdEnd);\r\n    const [displayType, setDisplayType] = useState(_displayType);\r\n\r\n    const [curSelPersona, setCurSelPersona] = useState('');\r\n    const [curSelStage, setCurSelStage] = useState('');\r\n    const [buttonEnabled, setButtonEnabled] = useState(false);\r\n    const [updateSuccess, setUpdateSuccess] = useState(false);\r\n    const [showingAlert,setShowingAlert] = useState(false);\r\n    const [isUpdating, setIsUpdating] = useState(false);\r\n\r\n    const [selPersonaValidated, setSelPersonaValidated] = useState(false);\r\n    const [selStageValidated, setSelStageValidated] = useState(false);\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        updateExperience(curSelPersona,curSelStage);\r\n        return false;\r\n    }\r\n\r\n    const updateSelectedPersona = (e) => {\r\n        const newPersona = e.target.value;\r\n        if (curSelPersona != newPersona){\r\n            setCurSelPersona(newPersona);\r\n            checkSelectValidation(newPersona,curSelStage);\r\n        }\r\n    }\r\n\r\n    const updateSelectedStage = (e) => {\r\n        const newStage = e.target.value;\r\n        if (curSelStage != newStage){\r\n            setCurSelStage(newStage);\r\n            checkSelectValidation(curSelPersona,newStage);\r\n        }        \r\n    }\r\n\r\n    const checkSelectValidation = (persona,stage) => {\r\n        //check persona value and personaIds length to see if validated flag should be updated\r\n        if (persona != '' && personaIds.length){\r\n            setSelPersonaValidated(true);\r\n        } else if (persona = '' && personaIds.length){\r\n            setSelPersonaValidated(false);\r\n        }\r\n        //check stage value and stageIds length to see if validated flag should be updated\r\n        if (stage != '' && stageIds.length){\r\n            setSelStageValidated(true);\r\n        } else if (stage = '' && stageIds.length){\r\n            setSelStageValidated(false);\r\n        }\r\n    }\r\n\r\n    const updateButtonStatus = (selPersonaValidated,selStageValidated) => {\r\n        //check validation flags to see if Button should be enabled\r\n        if (selPersonaValidated && selStageValidated){\r\n            setButtonEnabled(true);\r\n        } else {\r\n            setButtonEnabled(false);\r\n        }\r\n    }\r\n    const updateExperience = async (personaid,stageid) => {\r\n        setIsUpdating(true);\r\n        setButtonEnabled(false);\r\n        \r\n        const Personaid = personaid;\r\n        const Stageid = stageid;\r\n        // console.log('Personaid: ', Personaid);\r\n        // console.log('Stageid: ', Stageid);\r\n        const exp = await Mura\r\n          .getEntity('matrix_selector')\r\n          .invoke(\r\n            'updateExperience',\r\n            {\r\n                personaid:personaid,\r\n                stageid:stageid\r\n            }\r\n          );\r\n        \r\n        if (exp.personaselected || exp.stageselected){\r\n            setUpdateSuccess(1);\r\n            setShowingAlert(true);\r\n            setIsUpdating(false);\r\n            setSeconds(3);\r\n        }\r\n    \r\n        if (exp.personaselected){\r\n            Mura(function(){\r\n                Mura.trackEvent({\r\n                        category: 'Matrix Self ID',\r\n                        action: 'Persona',\r\n                        label:  '#esapiEncode(\"javascript\",personaName)#'\r\n                });\r\n            });\r\n        }\r\n        \r\n        if (exp.stageselected){\r\n            Mura(function(){\r\n                Mura.trackEvent({\r\n                        category: 'Matrix Self ID',\r\n                        action: 'Stage',\r\n                        label: '#esapiEncode(\"javascript\",stageName)#'\r\n                });\r\n            });\r\n        }\r\n    \r\n    }\r\n    \r\n    useEffect(() => {\r\n        let isMounted = true;\r\n\r\n        if (isMounted) {\r\n            updateButtonStatus(selPersonaValidated,selStageValidated);\r\n            //should we force a page refresh after this to load the updated persona and stage?\r\n        }\r\n        \r\n        return () => { isMounted = false };\r\n    }, [selPersonaValidated,selStageValidated])\r\n\r\n    const [seconds, setSeconds] = useState(0);\r\n    useEffect(() => {\r\n        if (seconds > 0){\r\n            setTimeout(() => setSeconds(seconds -1), 1000);\r\n        }\r\n        if (seconds < 1 && showingAlert ){\r\n            window.location = window.location.href.split(\"?\")[0];\r\n        }\r\n    }, [seconds]);\r\n\r\n    if(!objectparams.dynamicProps){\r\n        useEffect(() => {\r\n            let isMounted = true;\r\n            if (isMounted) {\r\n                getPersonas().then((personaProps) => {\r\n                    if (isMounted) {\r\n                        setPersonaIds(personaProps);\r\n                        if (!personaProps.length){\r\n                            if (isMounted) {\r\n                                setSelPersonaValidated(true);\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n                getStages().then((stageProps) => {\r\n                    if (isMounted) {\r\n                        setStageIds(stageProps);\r\n                        if (!stageProps.length){\r\n                            if (isMounted) {\r\n                                setSelStageValidated(true);\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n            return () => { isMounted = false };\r\n        }, []);\r\n        //todo do we need to add hidden form fields if personaIds or stageIds EQ 1?\r\n        const [open, setOpen] = React.useState('');\r\n\r\n        switch(displayType){\r\n            case \"widget\" :\r\n                return(\r\n                    <>\r\n                    {/* Mura.editing doesn't seem to work here */}\r\n                    <Alert variant=\"info matrix-selector-edit-alert\" >\r\n                        <p className=\"mb-0\">Matrix Selector</p>\r\n                    </Alert>\r\n                    <div className={`${open ? 'open' : ''} mura-matrix-selector__widget ${props.widgetposition}`}>\r\n                        <Button \r\n                            variant=\"light\"\r\n                            onClick={() => { setOpen(!open); }}>\r\n                            <FontAwesomeIcon icon={faBolt} /> Optimize Your Experience\r\n                        </Button>\r\n                        <div className=\"mura-matrix-selector__widget__inner\">\r\n                            <MatrixForm \r\n                                updateSuccess={updateSuccess}\r\n                                showingAlert={showingAlert}\r\n                                handleSubmit={handleSubmit}\r\n                                selfIdStart={selfIdStart}\r\n                                updateSelectedPersona={updateSelectedPersona}\r\n                                personaIds={personaIds}\r\n                                stageIds={stageIds}\r\n                                selfIdMiddle={selfIdMiddle}\r\n                                updateSelectedStage={updateSelectedStage}\r\n                                selfIdEnd={selfIdEnd}\r\n                                buttonEnabled={buttonEnabled}\r\n                                isUpdating={isUpdating}\r\n                                displaytype={displayType}\r\n                                {...props}\r\n                                seconds={seconds}\r\n                            />\r\n                            <div className=\"mura-matrix-selector__widget__inner__footer\">\r\n                                <MatrixSelectorFooter {...props} />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    </>\r\n                )\r\n                break\r\n            case \"eyebrow\" :\r\n                return(\r\n                    <div className={`mura-matrix-selector__eyebrow`}>\r\n                        <div className=\"mura-matrix-selector__eyebrow__inner\">\r\n                            {!showingAlert &&\r\n                                <div className=\"mura-matrix-selector__eyebrow__inner__heading\">\r\n                                    <h4><FontAwesomeIcon icon={faBolt} /> Optimize Your Experience</h4>\r\n                                </div>\r\n                            }\r\n                            <MatrixForm \r\n                                updateSuccess={updateSuccess}\r\n                                showingAlert={showingAlert}\r\n                                handleSubmit={handleSubmit}\r\n                                selfIdStart={selfIdStart}\r\n                                updateSelectedPersona={updateSelectedPersona}\r\n                                personaIds={personaIds}\r\n                                stageIds={stageIds}\r\n                                selfIdMiddle={selfIdMiddle}\r\n                                updateSelectedStage={updateSelectedStage}\r\n                                selfIdEnd={selfIdEnd}\r\n                                buttonEnabled={buttonEnabled}\r\n                                isUpdating={isUpdating}\r\n                                displaytype={displayType}\r\n                                {...props}\r\n                                seconds={seconds}\r\n                            />\r\n                            {!showingAlert &&\r\n                                <div className=\"mura-matrix-selector__eyebrow__inner__footer\">\r\n                                    <MatrixSelectorFooter {...props} />\r\n                                </div>\r\n                            }\r\n                        </div>\r\n                    </div>\r\n                )\r\n                break\r\n        }\r\n            return (\r\n                <>\r\n                <MatrixForm \r\n                    updateSuccess={updateSuccess}\r\n                    showingAlert={showingAlert}\r\n                    handleSubmit={handleSubmit}\r\n                    selfIdStart={selfIdStart}\r\n                    updateSelectedPersona={updateSelectedPersona}\r\n                    personaIds={personaIds}\r\n                    stageIds={stageIds}\r\n                    selfIdMiddle={selfIdMiddle}\r\n                    updateSelectedStage={updateSelectedStage}\r\n                    selfIdEnd={selfIdEnd}\r\n                    buttonEnabled={buttonEnabled}\r\n                    isUpdating={isUpdating}\r\n                    {...props}\r\n                    seconds={seconds}\r\n                />\r\n                {!showingAlert &&\r\n                    <div className=\"mura-matrix-selector__inline__footer\" key=\"matrix-selector-footer\">\r\n                        <MatrixSelectorFooter {...props} />\r\n                    </div>\r\n                }\r\n                </>\r\n            )\r\n    } else {\r\n\r\n    }\r\n}\r\nconst MatrixSelectorFooter = (props) => {\r\n    const CustomLinks = props.customlinks ? Array.from(props.customlinks) : [];\r\n    console.log('props: ', props);\r\n    if (CustomLinks && CustomLinks.length){\r\n        const UtilityLinks = CustomLinks.map((link) => \r\n        <li className=\"list-inline-item\" key={link.name}>\r\n            <a href={link.value}>{link.name}</a>\r\n        </li>\r\n        );\r\n        return (\r\n            <ul className=\"list-inline\">\r\n                {UtilityLinks}\r\n            </ul>\r\n        )\r\n    }\r\n    return null    \r\n}\r\n\r\nconst MatrixForm = (props) => {\r\n    return (\r\n        <>\r\n        {props.updateSuccess && props.showingAlert &&\r\n            <div className=\"successMessage\">\r\n                <h4>Thanks!</h4>\r\n                <p>We&rsquo;re tailoring our content for you in &hellip; {props.seconds}</p>\r\n            </div>\r\n        }\r\n        {!props.updateSuccess && !props.showingAlert &&\r\n        <Form inline id=\"mura_matrix-selector-form\" onSubmit={props.handleSubmit} data-autowire=\"false\">\r\n            <div className=\"select-wrap\">\r\n            {props.personaIds.length > 1 &&\r\n            <>\r\n                <Form.Label className=\"mr-2\">{props.selfIdStart}</Form.Label>\r\n                <Form.Control as=\"select\" name=\"persona\" size=\"sm\" className=\"mr-2\" value={props.curSelPersona} onChange={props.updateSelectedPersona}>\r\n                    <option value=\"\" key=\"--\">--</option>\r\n                    {props.personaIds.map((personaId) => (\r\n                    <option value={personaId.personaid} key={personaId.personaid}>{personaId.selfidq}</option>\r\n                    ))}\r\n                </Form.Control>\r\n            </>\r\n            }\r\n            {props.stageIds.length > 1 &&\r\n            <>\r\n                <Form.Label className=\"mr-2\">{props.selfIdMiddle}</Form.Label>\r\n                <Form.Control as=\"select\" name=\"stage\" size=\"sm\" className=\"mr-2\" value={props.curSelStage} onChange={props.updateSelectedStage}>\r\n                    <option value=\"\" key=\"--\">--</option>\r\n                    {props.stageIds.map((stageId) => (\r\n                    <option value={stageId.stageid} key={stageId.stageid}>{stageId.selfidq}</option>\r\n                    ))}\r\n                </Form.Control>\r\n            </>\r\n            }\r\n            <p>{props.selfIdEnd}</p>\r\n            \r\n            \r\n            <Button className=\"ml-2\" variant=\"link\" size=\"sm\" type=\"submit\" disabled={!props.buttonEnabled}>\r\n                {props.isUpdating ? 'Updating...' : 'Update'}\r\n            </Button>\r\n            </div>\r\n        </Form>\r\n        }\r\n        </>\r\n    )\r\n}\r\nexport const getDynamicProps = async props => {\r\n    const personaIds = await getPersonas();\r\n    const stageIds = await getStages();\r\n\r\n    return{\r\n      personaProps:personaIds,\r\n      stageProps:stageIds\r\n    }\r\n}\r\n\r\nconst getPersonas = async () => {  \r\n    \r\n    const personaIds = await Mura\r\n      .getEntity('matrix_selector')\r\n      .invoke(\r\n        'getPersonas'\r\n      );\r\n\r\n    return personaIds;\r\n}\r\n\r\nconst getStages = async () => {  \r\n    \r\n    const stageIds = await Mura\r\n      .getEntity('matrix_selector')\r\n      .invoke(\r\n        'getStages'\r\n      );\r\n    \r\n    return stageIds;\r\n}\r\n\r\nexport default MatrixSelector;","import React, { useEffect, useState } from 'react';\r\nimport Link from 'next/link';\r\nimport Navbar from 'react-bootstrap/Navbar'\r\nimport Nav from 'react-bootstrap/Nav'\r\nimport NavDropdown from 'react-bootstrap/NavDropdown'\r\nimport { getMura, getHref } from '@murasoftware/next-core';\r\n\r\nfunction PrimaryNav(props) {\r\n  const objectparams = Object.assign({}, props);\r\n  //console.log(props)\r\n  if(!objectparams.dynamicProps){\r\n    const [items, setItems]=useState('');\r\n\r\n    useEffect(() => {\r\n        getDynamicProps(objectparams).then((dynamicProps)=>{\r\n          setItems(dynamicProps.items);\r\n        });\r\n    },[]);\r\n\r\n    if(items){\r\n      return (\r\n        <Render items={items} link={RouterlessLink} props={props} />\r\n      );\r\n    } else {\r\n      return (\r\n        <div></div>\r\n        );\r\n    }\r\n  } else {\r\n    return (\r\n      <Render items={objectparams.dynamicProps.items} link={RouterLink} props={props} />\r\n    );\r\n  }\r\n}\r\n\r\nconst Render = ({ items, link, ...props }) => {\r\n    const Link=link;\r\n    const homeNavIcon = '<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" aria-hidden=\"true\" focusable=\"false\" width=\"1em\" height=\"1em\" style=\"-ms-transform: rotate(360deg); -webkit-transform: rotate(360deg); transform: rotate(360deg);\" preserveAspectRatio=\"xMidYMid meet\" viewBox=\"0 0 20 20\"><path d=\"M16 8.5l1.53 1.53l-1.06 1.06L10 4.62l-6.47 6.47l-1.06-1.06L10 2.5l4 4v-2h2v4zm-6-2.46l6 5.99V18H4v-5.97zM12 17v-5H8v5h4z\" fill=\"#626262\"/></svg>';\r\n   \r\n    return (\r\n      <Navbar bg=\"white\" variant=\"light\" expand=\"lg\" className=\"navbar-static-top py-0\"  collapseOnSelect>\r\n      <div className=\"container-xl\">\r\n        <Link\r\n          href={'/'}\r\n          className=\"navbar-brand\"\r\n          type=\"navbarbrand\"\r\n          navlogo={props.props.navlogo} />\r\n        <Navbar.Toggle aria-controls=\"primary-nav\" />\r\n        <Navbar.Collapse id=\"primary-nav\">\r\n          <Nav className=\"ml-auto\">\r\n\r\n            <Homelink displayhome={props.props.displayhome} link={Link} navicon={homeNavIcon} />\r\n            \r\n            {\r\n              items.map(item => {\r\n                  return (  \r\n                    <NavLinkDropdown key={item.contentid} contentid={item.contentid} filename={item.filename} menutitle={item.menutitle} kids={item.kids} link={Link} navicon={item.navicon} />\r\n                  )\r\n              })\r\n            }\r\n            {props.props.content && props.props.content.translations && (\r\n                <LangOptions translations={props.props.content.translations} />\r\n              )\r\n            }\r\n            </Nav>\r\n          </Navbar.Collapse>\r\n        </div>\r\n      </Navbar>\r\n    )\r\n};\r\n\r\nexport const getDynamicProps = async props => {\r\n  const Mura = getMura();\r\n  \r\n  //console.log(\"requesting primary nav data\",props.instanceid,Date.now(),Mura.siteid);\r\n \r\n  const collection=await Mura.getFeed('content')\r\n    .where()\r\n    .prop('parentid')\r\n    .isEQ(Mura.homeid)\r\n    .sort('orderno')\r\n    .expand(\"kids\")\r\n    .fields('navicon,menutitle,url,filename')\r\n    .getQuery();\r\n  \r\n    //console.log(\"receiving primary nav data\",props.instanceid,Date.now(),Mura.siteid);\r\n  return {\r\n    items:collection.getAll().items\r\n  };\r\n}\r\n\r\nconst RouterlessLink = ({href,className,type,menutitle,navlogo})=>{\r\n  switch(type) {\r\n    case \"navdropdownitem\":\r\n      return (\r\n        <NavDropdown.Item href={getHref(href)}>{menutitle}</NavDropdown.Item>\r\n      )\r\n    case \"navlink\":\r\n      return (\r\n        <Nav.Link href={getHref(href)}>{menutitle}</Nav.Link>\r\n      )\r\n    case \"navbarbrand\":\r\n      return(\r\n        <Navbar.Brand href={getHref(href)}>\r\n          <img src={navlogo} loading=\"lazy\" />\r\n        </Navbar.Brand>\r\n      )\r\n    default:\r\n      return (     \r\n        <a className={className} href={getHref(href)}>\r\n            {menutitle}\r\n        </a>\r\n      )\r\n    }\r\n  }\r\n  \r\nconst RouterLink = ({href,className,type,menutitle,navlogo})=>{\r\n  switch(type) {\r\n    case \"navdropdownitem\":\r\n      return (\r\n        <Link \r\n        href={getHref(href)} passHref>\r\n          <NavDropdown.Item>{menutitle}</NavDropdown.Item>\r\n        </Link>\r\n      )\r\n    case \"navlink\":\r\n      return (\r\n        <Link \r\n        href={getHref(href)} passHref>\r\n          <Nav.Link>{menutitle}</Nav.Link>\r\n        </Link>\r\n      )\r\n    case \"navbarbrand\":\r\n      return(\r\n        <Link \r\n        href={getHref(href)} passHref>\r\n          <Navbar.Brand>\r\n            <img src={navlogo} loading=\"lazy\" />\r\n          </Navbar.Brand>\r\n        </Link>\r\n      )\r\n    default:\r\n      return (\r\n        <Link \r\n          href={getHref(href)}>      \r\n            <a \r\n              className={className}>\r\n                {menutitle}\r\n            </a>\r\n        </Link>\r\n      )\r\n    }\r\n}\r\n\r\nconst Homelink = (props) => {\r\n  const Link=props.link;\r\n  const homeTitle = 'Home';\r\n  const Mura = getMura();\r\n\r\n  function createIcon() { \r\n    return {__html: props.navicon};\r\n  };\r\n\r\n  if (props.displayhome){\r\n    return (\r\n      <li className=\"nav-item\">\r\n        <Link\r\n          key={Mura.homeid}\r\n          href=\"/\"\r\n          className=\"nav-link\"\r\n          type=\"navitem\"\r\n          menutitle={<><span dangerouslySetInnerHTML={createIcon()} /> {homeTitle}</>}\r\n          type=\"navlink\" />\r\n      </li>\r\n    )\r\n  }\r\n  return (\r\n    <></>\r\n  )\r\n}\r\n\r\nconst LangOptions = props => {\r\n\r\n  if (props.translations.items.length) {\r\n       \r\n    return (\r\n      <>\r\n      <NavDropdown key=\"lang-options\" title=\"Other Languages\" id=\"lang-options\" href=\"\" renderMenuOnMount={true}>\r\n        {/* if there are children, build the rest of the dropdown */}\r\n        {props.translations.items.map((translation) => {\r\n          return(\r\n            <NavDropdown.Item key={`lang-option-${translation.siteid}`} href={translation.url}>{translation.label}</NavDropdown.Item>\r\n          )\r\n        })}\r\n      </NavDropdown>\r\n      </>\r\n    )\r\n  }\r\n}\r\n\r\nconst NavLinkDropdown = props => {\r\n  const Link = props.link;\r\n  function createIcon() { \r\n    return {__html: props.navicon};\r\n  };\r\n  if (props.kids.items.length) {\r\n       \r\n    return (\r\n      <>\r\n      <NavDropdown key={props.contentid} title={<div style={{display: \"inline-block\"}}><span dangerouslySetInnerHTML={createIcon()} /> {props.menutitle} </div>} id={`dropdown-${props.contentid}`} href={`/${props.filename}`} renderMenuOnMount={true}>\r\n        {/* placing the main nav item in the dropdown for now since the parent nav item is not a clickable link */}\r\n        <Link\r\n          key={props.contentid}\r\n          href={`/${props.filename}`}\r\n          type=\"navdropdownitem\"\r\n          menutitle={props.menutitle} />\r\n\r\n        {/* if there are children, build the rest of the dropdown */}\r\n        {props.kids.items.map((child) => {\r\n          return(\r\n            <Link\r\n              key={child.contentid}\r\n              href={`/${child.filename}`}\r\n              type=\"navdropdownitem\"\r\n              menutitle={child.menutitle} />\r\n          )\r\n        })}\r\n      </NavDropdown>\r\n      </>\r\n    )\r\n  }\r\n\r\n  // if item doesn't have children create a link\r\n  return (\r\n    <li className=\"nav-item\">\r\n      <Link \r\n        key={props.contentid}\r\n        href={`/${props.filename}`}\r\n        type=\"navlink\"\r\n        menutitle={<><span dangerouslySetInnerHTML={createIcon()} /> {props.menutitle} </>} />\r\n    </li>    \r\n  )\r\n\r\n}\r\nexport default PrimaryNav;\r\n","// A type of promise-like that resolves synchronously and supports only one observer\nexport const _Pact = /*#__PURE__*/(function() {\n\tfunction _Pact() {}\n\t_Pact.prototype.then = function(onFulfilled, onRejected) {\n\t\tconst result = new _Pact();\n\t\tconst state = this.s;\n\t\tif (state) {\n\t\t\tconst callback = state & 1 ? onFulfilled : onRejected;\n\t\t\tif (callback) {\n\t\t\t\ttry {\n\t\t\t\t\t_settle(result, 1, callback(this.v));\n\t\t\t\t} catch (e) {\n\t\t\t\t\t_settle(result, 2, e);\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t} else {\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}\n\t\tthis.o = function(_this) {\n\t\t\ttry {\n\t\t\t\tconst value = _this.v;\n\t\t\t\tif (_this.s & 1) {\n\t\t\t\t\t_settle(result, 1, onFulfilled ? onFulfilled(value) : value);\n\t\t\t\t} else if (onRejected) {\n\t\t\t\t\t_settle(result, 1, onRejected(value));\n\t\t\t\t} else {\n\t\t\t\t\t_settle(result, 2, value);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t_settle(result, 2, e);\n\t\t\t}\n\t\t};\n\t\treturn result;\n\t}\n\treturn _Pact;\n})();\n\n// Settles a pact synchronously\nexport function _settle(pact, state, value) {\n\tif (!pact.s) {\n\t\tif (value instanceof _Pact) {\n\t\t\tif (value.s) {\n\t\t\t\tif (state & 1) {\n\t\t\t\t\tstate = value.s;\n\t\t\t\t}\n\t\t\t\tvalue = value.v;\n\t\t\t} else {\n\t\t\t\tvalue.o = _settle.bind(null, pact, state);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tif (value && value.then) {\n\t\t\tvalue.then(_settle.bind(null, pact, state), _settle.bind(null, pact, 2));\n\t\t\treturn;\n\t\t}\n\t\tpact.s = state;\n\t\tpact.v = value;\n\t\tconst observer = pact.o;\n\t\tif (observer) {\n\t\t\tobserver(pact);\n\t\t}\n\t}\n}\n\nexport function _isSettledPact(thenable) {\n\treturn thenable instanceof _Pact && thenable.s & 1;\n}\n\n// Converts argument to a function that always returns a Promise\nexport function _async(f) {\n\treturn function() {\n\t\tfor (var args = [], i = 0; i < arguments.length; i++) {\n\t\t\targs[i] = arguments[i];\n\t\t}\n\t\ttry {\n\t\t\treturn Promise.resolve(f.apply(this, args));\n\t\t} catch(e) {\n\t\t\treturn Promise.reject(e);\n\t\t}\n\t}\n}\n\n// Awaits on a value that may or may not be a Promise (equivalent to the await keyword in ES2015, with continuations passed explicitly)\nexport function _await(value, then, direct) {\n\tif (direct) {\n\t\treturn then ? then(value) : value;\n\t}\n\tif (!value || !value.then) {\n\t\tvalue = Promise.resolve(value);\n\t}\n\treturn then ? value.then(then) : value;\n}\n\n// Awaits on a value that may or may not be a Promise, then ignores it\nexport function _awaitIgnored(value, direct) {\n\tif (!direct) {\n\t\treturn value && value.then ? value.then(_empty) : Promise.resolve();\n\t}\n}\n\n// Proceeds after a value has resolved, or proceeds immediately if the value is not thenable\nexport function _continue(value, then) {\n\treturn value && value.then ? value.then(then) : then(value);\n}\n\n// Proceeds after a value has resolved, or proceeds immediately if the value is not thenable\nexport function _continueIgnored(value) {\n\tif (value && value.then) {\n\t\treturn value.then(_empty);\n\t}\n}\n\n// Asynchronously iterate through an object that has a length property, passing the index as the first argument to the callback (even as the length property changes)\nexport function _forTo(array, body, check) {\n\tvar i = -1, pact, reject;\n\tfunction _cycle(result) {\n\t\ttry {\n\t\t\twhile (++i < array.length && (!check || !check())) {\n\t\t\t\tresult = body(i);\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult.then(_cycle, reject || (reject = _settle.bind(null, pact = new _Pact(), 2)));\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (pact) {\n\t\t\t\t_settle(pact, 1, result);\n\t\t\t} else {\n\t\t\t\tpact = result;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t_settle(pact || (pact = new _Pact()), 2, e);\n\t\t}\n\t}\n\t_cycle();\n\treturn pact;\n}\n\n// Asynchronously iterate through an object's properties (including properties inherited from the prototype)\n// Uses a snapshot of the object's properties\nexport function _forIn(target, body, check) {\n\tvar keys = [];\n\tfor (var key in target) {\n\t\tkeys.push(key);\n\t}\n\treturn _forTo(keys, function(i) { return body(keys[i]); }, check);\n}\n\n// Asynchronously iterate through an object's own properties (excluding properties inherited from the prototype)\n// Uses a snapshot of the object's properties\nexport function _forOwn(target, body, check) {\n\tvar keys = [];\n\tfor (var key in target) {\n\t\tif (Object.prototype.hasOwnProperty.call(target, key)) {\n\t\t\tkeys.push(key);\n\t\t}\n\t}\n\treturn _forTo(keys, function(i) { return body(keys[i]); }, check);\n}\n\nexport const _iteratorSymbol = /*#__PURE__*/ typeof Symbol !== \"undefined\" ? (Symbol.iterator || (Symbol.iterator = Symbol(\"Symbol.iterator\"))) : \"@@iterator\";\n\n// Asynchronously iterate through an object's values\n// Uses for...of if the runtime supports it, otherwise iterates until length on a copy\nexport function _forOf(target, body, check) {\n\tif (typeof target[_iteratorSymbol] === \"function\") {\n\t\tvar iterator = target[_iteratorSymbol](), step, pact, reject;\n\t\tfunction _cycle(result) {\n\t\t\ttry {\n\t\t\t\twhile (!(step = iterator.next()).done && (!check || !check())) {\n\t\t\t\t\tresult = body(step.value);\n\t\t\t\t\tif (result && result.then) {\n\t\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresult.then(_cycle, reject || (reject = _settle.bind(null, pact = new _Pact(), 2)));\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (pact) {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t} else {\n\t\t\t\t\tpact = result;\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t_settle(pact || (pact = new _Pact()), 2, e);\n\t\t\t}\n\t\t}\n\t\t_cycle();\n\t\tif (iterator.return) {\n\t\t\tvar _fixup = function(value) {\n\t\t\t\ttry {\n\t\t\t\t\tif (!step.done) {\n\t\t\t\t\t\titerator.return();\n\t\t\t\t\t}\n\t\t\t\t} catch(e) {\n\t\t\t\t}\n\t\t\t\treturn value;\n\t\t\t}\n\t\t\tif (pact && pact.then) {\n\t\t\t\treturn pact.then(_fixup, function(e) {\n\t\t\t\t\tthrow _fixup(e);\n\t\t\t\t});\n\t\t\t}\n\t\t\t_fixup();\n\t\t}\n\t\treturn pact;\n\t}\n\t// No support for Symbol.iterator\n\tif (!(\"length\" in target)) {\n\t\tthrow new TypeError(\"Object is not iterable\");\n\t}\n\t// Handle live collections properly\n\tvar values = [];\n\tfor (var i = 0; i < target.length; i++) {\n\t\tvalues.push(target[i]);\n\t}\n\treturn _forTo(values, function(i) { return body(values[i]); }, check);\n}\n\nexport const _asyncIteratorSymbol = /*#__PURE__*/ typeof Symbol !== \"undefined\" ? (Symbol.asyncIterator || (Symbol.asyncIterator = Symbol(\"Symbol.asyncIterator\"))) : \"@@asyncIterator\";\n\n// Asynchronously iterate on a value using it's async iterator if present, or its synchronous iterator if missing\nexport function _forAwaitOf(target, body, check) {\n\tif (typeof target[_asyncIteratorSymbol] === \"function\") {\n\t\tvar pact = new _Pact();\n\t\tvar iterator = target[_asyncIteratorSymbol]();\n\t\titerator.next().then(_resumeAfterNext).then(void 0, _reject);\n\t\treturn pact;\n\t\tfunction _resumeAfterBody(result) {\n\t\t\tif (check && check()) {\n\t\t\t\treturn _settle(pact, 1, iterator.return ? iterator.return().then(function() { return result; }) : result);\n\t\t\t}\n\t\t\titerator.next().then(_resumeAfterNext).then(void 0, _reject);\n\t\t}\n\t\tfunction _resumeAfterNext(step) {\n\t\t\tif (step.done) {\n\t\t\t\t_settle(pact, 1);\n\t\t\t} else {\n\t\t\t\tPromise.resolve(body(step.value)).then(_resumeAfterBody).then(void 0, _reject);\n\t\t\t}\n\t\t}\n\t\tfunction _reject(error) {\n\t\t\t_settle(pact, 2, iterator.return ? iterator.return().then(function() { return error; }) : error);\n\t\t}\n\t}\n\treturn Promise.resolve(_forOf(target, function(value) { return Promise.resolve(value).then(body); }, check));\n}\n\n// Asynchronously implement a generic for loop\nexport function _for(test, update, body) {\n\tvar stage;\n\tfor (;;) {\n\t\tvar shouldContinue = test();\n\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\tshouldContinue = shouldContinue.v;\n\t\t}\n\t\tif (!shouldContinue) {\n\t\t\treturn result;\n\t\t}\n\t\tif (shouldContinue.then) {\n\t\t\tstage = 0;\n\t\t\tbreak;\n\t\t}\n\t\tvar result = body();\n\t\tif (result && result.then) {\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.s;\n\t\t\t} else {\n\t\t\t\tstage = 1;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (update) {\n\t\t\tvar updateValue = update();\n\t\t\tif (updateValue && updateValue.then && !_isSettledPact(updateValue)) {\n\t\t\t\tstage = 2;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\tvar pact = new _Pact();\n\tvar reject = _settle.bind(null, pact, 2);\n\t(stage === 0 ? shouldContinue.then(_resumeAfterTest) : stage === 1 ? result.then(_resumeAfterBody) : updateValue.then(_resumeAfterUpdate)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterBody(value) {\n\t\tresult = value;\n\t\tdo {\n\t\t\tif (update) {\n\t\t\t\tupdateValue = update();\n\t\t\t\tif (updateValue && updateValue.then && !_isSettledPact(updateValue)) {\n\t\t\t\t\tupdateValue.then(_resumeAfterUpdate).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tshouldContinue = test();\n\t\t\tif (!shouldContinue || (_isSettledPact(shouldContinue) && !shouldContinue.v)) {\n\t\t\t\t_settle(pact, 1, result);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.v;\n\t\t\t}\n\t\t} while (!result || !result.then);\n\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t}\n\tfunction _resumeAfterTest(shouldContinue) {\n\t\tif (shouldContinue) {\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t} else {\n\t\t\t\t_resumeAfterBody(result);\n\t\t\t}\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n\tfunction _resumeAfterUpdate() {\n\t\tif (shouldContinue = test()) {\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t} else {\n\t\t\t\t_resumeAfterTest(shouldContinue);\n\t\t\t}\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n}\n\n// Asynchronously implement a do ... while loop\nexport function _do(body, test) {\n\tvar awaitBody;\n\tdo {\n\t\tvar result = body();\n\t\tif (result && result.then) {\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.v;\n\t\t\t} else {\n\t\t\t\tawaitBody = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tvar shouldContinue = test();\n\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\tshouldContinue = shouldContinue.v;\n\t\t}\n\t\tif (!shouldContinue) {\n\t\t\treturn result;\n\t\t}\n\t} while (!shouldContinue.then);\n\tconst pact = new _Pact();\n\tconst reject = _settle.bind(null, pact, 2);\n\t(awaitBody ? result.then(_resumeAfterBody) : shouldContinue.then(_resumeAfterTest)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterBody(value) {\n\t\tresult = value;\n\t\tfor (;;) {\n\t\t\tshouldContinue = test();\n\t\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\t\tshouldContinue = shouldContinue.v;\n\t\t\t}\n\t\t\tif (!shouldContinue) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\tresult = result.v;\n\t\t\t\t} else {\n\t\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t_settle(pact, 1, result);\n\t}\n\tfunction _resumeAfterTest(shouldContinue) {\n\t\tif (shouldContinue) {\n\t\t\tdo {\n\t\t\t\tresult = body();\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tshouldContinue = test();\n\t\t\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\t\t\tshouldContinue = shouldContinue.v;\n\t\t\t\t}\n\t\t\t\tif (!shouldContinue) {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} while (!shouldContinue.then);\n\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n}\n\n// Asynchronously implement a switch statement\nexport function _switch(discriminant, cases) {\n\tvar dispatchIndex = -1;\n\tvar awaitBody;\n\touter: {\n\t\tfor (var i = 0; i < cases.length; i++) {\n\t\t\tvar test = cases[i][0];\n\t\t\tif (test) {\n\t\t\t\tvar testValue = test();\n\t\t\t\tif (testValue && testValue.then) {\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\t\t\t\tif (testValue === discriminant) {\n\t\t\t\t\tdispatchIndex = i;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Found the default case, set it as the pending dispatch case\n\t\t\t\tdispatchIndex = i;\n\t\t\t}\n\t\t}\n\t\tif (dispatchIndex !== -1) {\n\t\t\tdo {\n\t\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\t\twhile (!body) {\n\t\t\t\t\tdispatchIndex++;\n\t\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t\t}\n\t\t\t\tvar result = body();\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tawaitBody = true;\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\t\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\t\tdispatchIndex++;\n\t\t\t} while (fallthroughCheck && !fallthroughCheck());\n\t\t\treturn result;\n\t\t}\n\t}\n\tconst pact = new _Pact();\n\tconst reject = _settle.bind(null, pact, 2);\n\t(awaitBody ? result.then(_resumeAfterBody) : testValue.then(_resumeAfterTest)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterTest(value) {\n\t\tfor (;;) {\n\t\t\tif (value === discriminant) {\n\t\t\t\tdispatchIndex = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (++i === cases.length) {\n\t\t\t\tif (dispatchIndex !== -1) {\n\t\t\t\t\tbreak;\n\t\t\t\t} else {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\ttest = cases[i][0];\n\t\t\tif (test) {\n\t\t\t\tvalue = test();\n\t\t\t\tif (value && value.then) {\n\t\t\t\t\tvalue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdispatchIndex = i;\n\t\t\t}\n\t\t}\n\t\tdo {\n\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\twhile (!body) {\n\t\t\t\tdispatchIndex++;\n\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t}\n\t\t\tvar result = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\tdispatchIndex++;\n\t\t} while (fallthroughCheck && !fallthroughCheck());\n\t\t_settle(pact, 1, result);\n\t}\n\tfunction _resumeAfterBody(result) {\n\t\tfor (;;) {\n\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\tif (!fallthroughCheck || fallthroughCheck()) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdispatchIndex++;\n\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\twhile (!body) {\n\t\t\t\tdispatchIndex++;\n\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\t_settle(pact, 1, result);\n\t}\n}\n\n// Asynchronously call a function and pass the result to explicitly passed continuations\nexport function _call(body, then, direct) {\n\tif (direct) {\n\t\treturn then ? then(body()) : body();\n\t}\n\ttry {\n\t\tvar result = Promise.resolve(body());\n\t\treturn then ? result.then(then) : result;\n\t} catch (e) {\n\t\treturn Promise.reject(e);\n\t}\n}\n\n// Asynchronously call a function and swallow the result\nexport function _callIgnored(body, direct) {\n\treturn _call(body, _empty, direct);\n}\n\n// Asynchronously call a function and pass the result to explicitly passed continuations\nexport function _invoke(body, then) {\n\tvar result = body();\n\tif (result && result.then) {\n\t\treturn result.then(then);\n\t}\n\treturn then(result);\n}\n\n// Asynchronously call a function and swallow the result\nexport function _invokeIgnored(body) {\n\tvar result = body();\n\tif (result && result.then) {\n\t\treturn result.then(_empty);\n\t}\n}\n\n// Asynchronously call a function and send errors to recovery continuation\nexport function _catch(body, recover) {\n\ttry {\n\t\tvar result = body();\n\t} catch(e) {\n\t\treturn recover(e);\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(void 0, recover);\n\t}\n\treturn result;\n}\n\n// Asynchronously await a promise and pass the result to a finally continuation\nexport function _finallyRethrows(body, finalizer) {\n\ttry {\n\t\tvar result = body();\n\t} catch (e) {\n\t\treturn finalizer(true, e);\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(finalizer.bind(null, false), finalizer.bind(null, true));\n\t}\n\treturn finalizer(false, result);\n}\n\n// Asynchronously await a promise and invoke a finally continuation that always overrides the result\nexport function _finally(body, finalizer) {\n\ttry {\n\t\tvar result = body();\n\t} catch (e) {\n\t\treturn finalizer();\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(finalizer, finalizer);\n\t}\n\treturn finalizer();\n}\n\n// Rethrow or return a value from a finally continuation\nexport function _rethrow(thrown, value) {\n\tif (thrown)\n\t\tthrow value;\n\treturn value;\n}\n\n// Empty function to implement break and other control flow that ignores asynchronous results\nexport function _empty() {\n}\n\n// Sentinel value for early returns in generators \nexport const _earlyReturn = /*#__PURE__*/ {};\n\n// Asynchronously call a function and send errors to recovery continuation, skipping early returns\nexport function _catchInGenerator(body, recover) {\n\treturn _catch(body, function(e) {\n\t\tif (e === _earlyReturn) {\n\t\t\tthrow e;\n\t\t}\n\t\treturn recover(e);\n\t});\n}\n\n// Asynchronous generator class; accepts the entrypoint of the generator, to which it passes itself when the generator should start\nexport const _AsyncGenerator = /*#__PURE__*/(function() {\n\tfunction _AsyncGenerator(entry) {\n\t\tthis._entry = entry;\n\t\tthis._pact = null;\n\t\tthis._resolve = null;\n\t\tthis._return = null;\n\t\tthis._promise = null;\n\t}\n\n\tfunction _wrapReturnedValue(value) {\n\t\treturn { value: value, done: true };\n\t}\n\tfunction _wrapYieldedValue(value) {\n\t\treturn { value: value, done: false };\n\t}\n\n\t_AsyncGenerator.prototype._yield = function(value) {\n\t\t// Yield the value to the pending next call\n\t\tthis._resolve(value && value.then ? value.then(_wrapYieldedValue) : _wrapYieldedValue(value));\n\t\t// Return a pact for an upcoming next/return/throw call\n\t\treturn this._pact = new _Pact();\n\t};\n\t_AsyncGenerator.prototype.next = function(value) {\n\t\t// Advance the generator, starting it if it has yet to be started\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tconst _entry = _this._entry;\n\t\t\t\tif (_entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the next call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Start the generator\n\t\t\t\t_this._entry = null;\n\t\t\t\t_this._resolve = resolve;\n\t\t\t\tfunction returnValue(value) {\n\t\t\t\t\t_this._resolve(value && value.then ? value.then(_wrapReturnedValue) : _wrapReturnedValue(value));\n\t\t\t\t\t_this._pact = null;\n\t\t\t\t\t_this._resolve = null;\n\t\t\t\t}\n\t\t\t\tvar result = _entry(_this);\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tresult.then(returnValue, function(error) {\n\t\t\t\t\t\tif (error === _earlyReturn) {\n\t\t\t\t\t\t\treturnValue(_this._return);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst pact = new _Pact();\n\t\t\t\t\t\t\t_this._resolve(pact);\n\t\t\t\t\t\t\t_this._pact = null;\n\t\t\t\t\t\t\t_this._resolve = null;\n\t\t\t\t\t\t\t_resolve(pact, 2, error);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\treturnValue(result);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Generator is started and a yield expression is pending, settle it\n\t\t\t\t_this._pact = null;\n\t\t\t\t_this._resolve = resolve;\n\t\t\t\t_settle(_pact, 1, value);\n\t\t\t}\n\t\t});\n\t};\n\t_AsyncGenerator.prototype.return = function(value) {\n\t\t// Early return from the generator if started, otherwise abandons the generator\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tif (_this._entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the return call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Generator is not started, abandon it and return the specified value\n\t\t\t\t_this._entry = null;\n\t\t\t\treturn resolve(value && value.then ? value.then(_wrapReturnedValue) : _wrapReturnedValue(value));\n\t\t\t}\n\t\t\t// Settle the yield expression with a rejected \"early return\" value\n\t\t\t_this._return = value;\n\t\t\t_this._resolve = resolve;\n\t\t\t_this._pact = null;\n\t\t\t_settle(_pact, 2, _earlyReturn);\n\t\t});\n\t};\n\t_AsyncGenerator.prototype.throw = function(error) {\n\t\t// Inject an exception into the pending yield expression\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve, reject) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tif (_this._entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the throw call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Generator is not started, abandon it and return a rejected Promise containing the error\n\t\t\t\t_this._entry = null;\n\t\t\t\treturn reject(error);\n\t\t\t}\n\t\t\t// Settle the yield expression with the value as a rejection\n\t\t\t_this._resolve = resolve;\n\t\t\t_this._pact = null;\n\t\t\t_settle(_pact, 2, error);\n\t\t});\n\t};\n\n\t_AsyncGenerator.prototype[_asyncIteratorSymbol] = function() {\n\t\treturn this;\n\t};\n\t\n\treturn _AsyncGenerator;\n})();\n","import React,{useState,useEffect} from 'react';\r\nimport Form from 'react-bootstrap/Form';\r\nimport InputGroup from 'react-bootstrap/InputGroup';\r\nimport Button from 'react-bootstrap/Button';\r\nimport { getMura } from '@murasoftware/next-core';\r\nimport { getLayout, RouterlessLink, RouterLink, getSelectFields } from './Collection';\r\nimport { useRouter } from 'next/router';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faSearch } from '@fortawesome/free-solid-svg-icons'\r\n\r\nfunction getDefaultQueryPropsFromLayout(layout,item){\r\n  if(layout){\r\n    return layout.getQueryProps ? layout.getQueryProps(item) : {fields:''};\r\n  } else {\r\n    return  {fields:''};\r\n  }\r\n}\r\n\r\nexport function ResourceHub(props) {\r\n  const Mura = getMura();\r\n  // return('This is the resource hub');\r\n  const objectparams = Object.assign({}, props);\r\n  const DynamicCollectionLayout = getLayout(objectparams.layout).component;\r\n\r\n  objectparams.fields=objectparams.fields || getDefaultQueryPropsFromLayout(DynamicCollectionLayout,objectparams).fields || 'Image,Date,Title,Summary,Credits,Tags';\r\n\r\n  let tags = '';\r\n  let author = '';\r\n  if (!Mura.editing){\r\n    const router = useRouter();\r\n    tags = router.query.t;\r\n    author = router.query.a;\r\n  }  \r\n\r\n  let _collection = false;\r\n  //SET DEFAULTS FOR CURRENT FILTER PARAMETERS\r\n  let _curSubtype = '*';\r\n  let _curCategoryIds = '*';\r\n  let _curPersonaId = '*';\r\n  let _curCategoriesArray = [];\r\n  let _hasMXP = false;\r\n\r\n  if(objectparams.dynamicProps){\r\n    _collection=new Mura.EntityCollection(objectparams.dynamicProps.collection,Mura._requestcontext);\r\n    _curSubtype = objectparams.dynamicProps.filterprops.subtype;\r\n    _curCategoryIds = objectparams.dynamicProps.filterprops.selectedcats.filter(sc => sc.instanceid == props.instanceid).map((item)=>item.value).join();\r\n    _curPersonaId = objectparams.dynamicProps.filterprops.personaid;\r\n    _curCategoriesArray = objectparams.dynamicProps.filterprops.selectedcats;\r\n    _hasMXP = objectparams.dynamicProps.filterprops.hasmxp;\r\n  }\r\n  const [collection,setCollection]=useState(_collection);\r\n  const instanceId = objectparams.instanceid;  \r\n\r\n  const [curSubtype, setCurSubtype]=useState(_curSubtype);\r\n  const [curCategoriesArray, setCurCategoriesArray]=useState(_curCategoriesArray);\r\n  const [curCategoryIds, setCurCategoryIds]=useState(_curCategoryIds);\r\n  const [curPersonaId, setCurPersonaId]=useState(_curPersonaId);\r\n  const [curSearchText, setCurSearchText]=useState('');\r\n  const [hasMXP, setHasMXP]=useState(_hasMXP);\r\n  const [showTextSearch, setShowTextSearch]=useState(objectparams.showtextsearch);//objectparams.showtextsearch\r\n  const [newFilter, setNewFilter]=useState(false);\r\n  const [filterUpdated, setFilterUpdated]=useState(new Date().toString());\r\n  \r\n  useEffect(() => {\r\n    let isMounted = true;\r\n    return () => { isMounted = false };\r\n  }, []);\r\n\r\n  const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        setCurSearchText(curSearchText);\r\n        setNewFilter(true);\r\n        setFilterUpdated(new Date().toString());\r\n  }\r\n  const updateFilter = (e) => {\r\n    switch(e.target.name) {\r\n      case 'subtype':\r\n        let subtype = e.target.value;\r\n        if (subtype != curSubtype) {\r\n          setCurSubtype(subtype);\r\n          setNewFilter(true);\r\n          setFilterUpdated(new Date().toString());\r\n        }\r\n        break\r\n      case 'personaid':\r\n        let personaid = e.target.value;\r\n        if (personaid != curPersonaId){\r\n          setCurPersonaId(personaid);\r\n          setNewFilter(true);\r\n          setFilterUpdated(new Date().toString());\r\n        }\r\n        break\r\n      default:\r\n        if (!curCategoryIds.includes(e.target.value)){\r\n          // console.log('e.target.value: ', e.target.value);\r\n          // console.log('curCategoryIds: ', curCategoryIds);\r\n          \r\n        }\r\n        // console.log('instanceId: ', instanceId);\r\n        setCurCategoriesArray(updateCategoryIds(e.target.name,e.target.value,curCategoriesArray,instanceId));\r\n          setCurCategoryIds(getCategoryIds(curCategoriesArray.filter(sc => sc.instanceid == instanceId)));\r\n          setNewFilter(true);\r\n          setFilterUpdated(new Date().toString());\r\n    }//switch    \r\n  }\r\n\r\n  if(!objectparams.dynamicProps){\r\n    useEffect(() => {\r\n      let isMounted = true;\r\n      if (isMounted) {\r\n        // setInstanceId(props.instanceid);\r\n        getFilterProps(curSubtype,curCategoryIds,curPersonaId,curCategoriesArray,newFilter).then((filterProps) => {\r\n          if (isMounted) {\r\n            \r\n            setHasMXP(filterProps.hasmxp);\r\n            setCurSubtype(filterProps.subtype);\r\n            setCurCategoryIds(filterProps.selectedcats.filter(sc => sc.instanceid == props.instanceid).map((item)=>item.value).join());\r\n            setCurPersonaId(filterProps.personaid);\r\n            setCurCategoriesArray(filterProps.selectedcats);\r\n            if(isMounted){\r\n              getCollection(props,filterProps,curSearchText,tags,author).then((collection) => {\r\n                setCollection(collection);\r\n              });\r\n            }\r\n          }\r\n        });\r\n      }\r\n      return () => { isMounted = false };\r\n    }, [filterUpdated])\r\n\r\n    if(collection) {\r\n    //   console.log('dynamic');\r\n    \r\n      return (\r\n        <div>\r\n          <RenderFilterForm \r\n            updateFilter={updateFilter}\r\n            {...props}\r\n            curSubtype={curSubtype}\r\n            curCategoryId={curCategoryIds}\r\n            curPersonaId={curPersonaId}\r\n            curCategoriesArray={curCategoriesArray}\r\n            hasMXP={hasMXP}\r\n            handleSubmit={handleSubmit}\r\n            curSearchText={curSearchText}\r\n            setCurSearchText={setCurSearchText}\r\n            showTextSearch={showTextSearch}\r\n          />\r\n\r\n          <DynamicCollectionLayout setCollection={setCollection} collection={collection} props={props} link={RouterlessLink}/>\r\n\r\n        </div>\r\n      )\r\n    } else {\r\n    //   console.log('empty');\r\n      return (\r\n        <div>{/* EMPTY COLLECTION */}</div>\r\n      )\r\n    }\r\n\r\n  } else {\r\n    console.log('ssr');\r\n    useEffect(() => {\r\n      let isMounted = true;\r\n      if (isMounted) {\r\n        getFilterProps(curSubtype,curCategoryIds,curPersonaId,curCategoriesArray,newFilter).then((filterProps) => {\r\n          if(isMounted){\r\n            setHasMXP(filterProps.hasmxp);\r\n            setCurSubtype(filterProps.subtype);\r\n            setCurCategoryIds(filterProps.categoryid);\r\n            setCurPersonaId(filterProps.personaid);\r\n            setCurCategoriesArray(filterProps.selectedcats);\r\n            \r\n            getCollection(props,filterProps,curSearchText,tags,author).then((collection) => {\r\n              if(isMounted){\r\n                setCollection(collection);\r\n              }\r\n            })\r\n          }\r\n        });\r\n      }\r\n      return () => { isMounted = false };\r\n    }, [filterUpdated])\r\n\r\n    return (\r\n      <div>\r\n        <RenderFilterForm \r\n          updateFilter={updateFilter}\r\n          {...props}\r\n          curSubtype={curSubtype}\r\n          curCategoryId={curCategoryIds}\r\n          curPersonaId={curPersonaId}\r\n          curCategoriesArray={curCategoriesArray}\r\n          hasMXP={hasMXP}\r\n            handleSubmit={handleSubmit}\r\n            curSearchText={curSearchText}\r\n            setCurSearchText={setCurSearchText}\r\n            showTextSearch={showTextSearch}\r\n        />\r\n        <DynamicCollectionLayout setCollection={setCollection} collection={collection} props={props} link={RouterLink}/>\r\n      </div>\r\n    )\r\n\r\n  }\r\n}\r\n\r\nconst getCategoryIds = categories => {\r\n  let categoriesList;\r\n  for (let i = 0; i < categories.length; i++){\r\n    if (categories[i].value != '*'){\r\n      if (i < 1){\r\n        categoriesList = categories[i].value;\r\n      } else {\r\n        categoriesList = categoriesList + ',' + categories[i].value;\r\n      }\r\n    }\r\n  }\r\n  \r\n  if (categoriesList == undefined){\r\n    categoriesList = '*';\r\n  }\r\n  return categoriesList\r\n}\r\n\r\nexport const getDynamicProps = async props => {\r\n  const filterProps = await getFilterProps('','','','',false);\r\n\r\n  \r\n  const collection = await getCollection(props,filterProps);\r\n \r\n  if(!Array.isArray(filterProps.selectedcats)){\r\n    try{\r\n      filterProps.selectedcats = JSON.parse(filterProps.selectedcats);\r\n    }catch(e){\r\n      filterProps.selectedcats = [];\r\n    }\r\n  }\r\n  return{\r\n    collection:collection.getAll(),\r\n    filterprops:filterProps\r\n  }\r\n}\r\n\r\nconst getCollection = async (props,filterProps,curSearchText,tags,author) => {\r\n  const Mura = getMura();\r\n    \r\n  let filterCategories = filterProps.categoryid;\r\n\r\n  if(typeof props.content.getAll != 'undefined'){\r\n      props.content=props.content.getAll();\r\n  }\r\n  if (filterProps.selectedcats.length){\r\n    filterCategories = filterProps.selectedcats.filter(sc => sc.instanceid == props.instanceid).map((item)=>item.value);\r\n    for( var i = 0; i < filterCategories.length; i++){ \r\n      if ( filterCategories[i] === '*') { \r\n        filterCategories.splice(i, 1); \r\n        i--; \r\n      }\r\n    }\r\n  }\r\n\r\n  // console.log('filterProps.selectedcats: ', filterProps.selectedcats);\r\n\r\n  let collection;\r\n\r\n  try{\r\n    const excludeIDList=props.content.contentid;\r\n    const feed = Mura.getFeed('content');\r\n\r\n    feed.prop('type').isIn('Page,Link,File');\r\n    feed.andProp('path').containsValue(props.content.contentid);\r\n    feed.andProp('contentid').isNotIn(excludeIDList);\r\n    feed.expand('categoryassignments');\r\n    feed.andProp('subtype').isNEQ('Author');\r\n    feed.andProp('subtype').isNEQ('Confirmation');\r\n    feed.andProp('subtype').isNEQ('Folder');\r\n    feed.fields(getSelectFields(props));\r\n    \r\n    if(filterProps.subtype.length){\r\n      feed.andProp('subtype').isEQ(filterProps.subtype);\r\n    }\r\n    \r\n    if(filterCategories.length){\r\n      feed.andProp('categoryid').isIn(filterCategories);\r\n      feed.useCategoryIntersect(true);\r\n    }\r\n    \r\n    if(curSearchText && curSearchText.length){\r\n      feed.andOpenGrouping();\r\n      feed.orProp('title').containsValue(curSearchText);\r\n      feed.orProp('body').containsValue(curSearchText);\r\n      feed.orProp('summary').containsValue(curSearchText);\r\n      feed.closeGrouping();\r\n    }\r\n    \r\n    if(tags){\r\n      feed.andProp('tag').containsValue(tags);\r\n    }\r\n    \r\n    if(author){\r\n      feed.andProp('Credits').isEQ(author);\r\n    }\r\n    \r\n    feed.maxItems(props.maxitems);\r\n\r\n    \r\n    if(Mura.renderMode !='static'){\r\n      \r\n      feed.itemsPerPage(props.nextn);\r\n    } else {\r\n      feed.itemsPerPage(0);\r\n    }\r\n\r\n    if(filterProps.personaid.length){\r\n      collection = await feed.getQuery({sortBy:\"mxpRelevance\"});\r\n    } else {\r\n      collection = await feed.sort('releasedate','desc').getQuery();\r\n    }\r\n  } catch(e){\r\n    console.log('error getting colleciton ',e)\r\n  }\r\n     \r\n  return collection;\r\n}\r\n\r\nconst getFilterProps = async (subtype,categoryid,personaid,selectedcategories,newfilter) => {\r\n    const Mura = getMura();\r\n    const Subtype = subtype;\r\n    const Categoryid = categoryid;\r\n    const Personaid = personaid;\r\n    const CurSelectedCats = selectedcategories;\r\n    const NewFilter = newfilter;\r\n    \r\n    const filterProps = await Mura\r\n        .getEntity('resourcehub')\r\n        .invoke(\r\n        'processFilterArgs',\r\n        {\r\n            subtype:Subtype, \r\n            categoryid:Categoryid, \r\n            personaid:Personaid, \r\n            selectedcats:CurSelectedCats, \r\n            newfilter: NewFilter?1:0\r\n        }\r\n    );\r\n  \r\n    return filterProps;\r\n}\r\n\r\nconst RenderFilterForm = (props) => {\r\n  const objectparams = Object.assign({}, props);\r\n  const [categoriesArray,setCategoriesArray]=useState(false);\r\n  const [personasArray,setPersonasArray]=useState(false);\r\n\r\n  const subtypesArray = objectparams.subtypes ? objectparams.subtypes.split(',') : [];\r\n  const categoryIds = objectparams.categoryids ? objectparams.categoryids.split(',') : [];\r\n  const personaIds = objectparams.personaids ? objectparams.personaids.split(',') : [];\r\n\r\n  useEffect(() => {\r\n    let isMounted = true;\r\n    if(isMounted && categoryIds && categoryIds.length){\r\n      getCategoriesInfo(categoryIds).then((data)=>{\r\n        if(isMounted && data.items.length){\r\n          setCategoriesArray(data.items);\r\n        }\r\n      });\r\n     }\r\n    if(isMounted && personaIds && personaIds.length){\r\n      getPersonasInfo(personaIds).then((data)=>{\r\n        if(isMounted && data.items.length){\r\n          setPersonasArray(data.items);  \r\n        }      \r\n      });\r\n    }   \r\n    return () => { isMounted = false };\r\n  }, []);\r\n\r\n  return (\r\n    <Form className=\"row row-cols-1 row-cols-sm-2 row-cols-lg-3\" id=\"resource-filter-form\" onSubmit={props.handleSubmit}>\r\n        {props.showTextSearch &&\r\n        <div className=\"col\">\r\n        <Form.Label>Search:</Form.Label>\r\n        <InputGroup controlid=\"textSearch\" className=\"text\">\r\n            <Form.Control \r\n                type=\"text\"\r\n                name=\"s\"\r\n                placeholder=\"Search\"\r\n                value={props.curSearchText}\r\n                onChange={e => props.setCurSearchText(e.target.value)}\r\n            />\r\n            <InputGroup.Append>\r\n              <Button variant=\"secondary\" type=\"submit\"><FontAwesomeIcon icon={faSearch} size=\"lg\" /></Button>\r\n            </InputGroup.Append>            \r\n        </InputGroup>\r\n        </div>\r\n        }\r\n      {subtypesArray && subtypesArray.length > 0 &&\r\n      <Form.Group controlid=\"selectSubtypes\" className=\"col type\">\r\n        <Form.Label>Content Types:</Form.Label>\r\n        <Form.Control as=\"select\" name=\"subtype\" custom onChange={ props.updateFilter } value={props.curSubtype}>\r\n          <option value=\"*\" key=\"All Subtypes\">All</option>\r\n          {subtypesArray.map((subtype, index) => (\r\n            <option value={subtype} key={index}>{subtype}</option>\r\n          ))}\r\n        </Form.Control>\r\n      </Form.Group>\r\n      }\r\n      {categoriesArray && categoriesArray.length > 0 &&\r\n      <>\r\n        {categoriesArray.map((category, index) => (\r\n          <CategorySelect categoryid={category.categoryid} filterlabel={category.name} updateFilter={props.updateFilter} curCategoryId={props.curCategoryId} key={category.categoryid} curCategoriesArray={props.curCategoriesArray} />\r\n        ))}\r\n      </>\r\n      }\r\n      {props.hasMXP && personasArray.length > 0 &&\r\n      <Form.Group controlid=\"selectPersonas\" className=\"col topic\">\r\n      <Form.Label>Audience:</Form.Label>\r\n        <Form.Control as=\"select\" name=\"personaid\" custom onChange={ props.updateFilter } value={props.curPersonaId}>\r\n          <option value=\"*\" key=\"All Personas\">All</option>\r\n          {personasArray.map(option => (\r\n            <option value={option.personaid} key={option.personaid}>{option.name}</option>\r\n          ))}\r\n        </Form.Control>\r\n      </Form.Group>\r\n      }\r\n    </Form>\r\n  );\r\n}\r\n\r\nconst CategorySelect = props => {\r\n  const [categoryKids,setCategoryKids]=useState([]);\r\n  let curSelectValue = '*';\r\n\r\n  useEffect(() => {\r\n    let isMounted = true;\r\n    getCategoryKidsInfo(props.categoryid).then((data)=>{\r\n      if (isMounted) {\r\n        setCategoryKids(data.items);\r\n      }\r\n    });\r\n\r\n    return () => { isMounted = false };\r\n  }, []);  \r\n  \r\n  for (let i=0; i < categoryKids.length; i++){\r\n      if (props.curCategoryId.includes(categoryKids[i].categoryid)){\r\n        curSelectValue = categoryKids[i].categoryid;\r\n        break\r\n      }\r\n  }\r\n  // console.log('curSelectValue: ', props.filterlabel, curSelectValue);\r\n  return(\r\n    <Form.Group controlid={`selectCategories${props.filterlabel}`} className=\"col topic\">\r\n      <Form.Label>{props.filterlabel}:</Form.Label>\r\n        <Form.Control as=\"select\" name={`categoryid${props.filterlabel}`} custom onChange={ props.updateFilter } value={curSelectValue}>\r\n          <option value=\"*\" key=\"All Categories\">All {props.filterlabel}</option>\r\n          {categoryKids.map((category, index) => (\r\n            <option value={category.categoryid} key={index}>{category.name}</option>\r\n          ))}\r\n        </Form.Control>\r\n    </Form.Group>\r\n  )\r\n}\r\n\r\nconst getCategoriesInfo = async (categoryIds) => {\r\n    const Mura = getMura();\r\n    const feed = Mura.getFeed('category');\r\n          feed.findMany(categoryIds);\r\n\r\n    const query = await feed.getQuery();\r\n    const categories = query.getAll();\r\n    // console.log('categories: ', categories);\r\n    return categories\r\n}\r\n\r\nconst getPersonasInfo = async (personaIds) => {\r\n    const Mura = getMura();\r\n    const feed = Mura.getFeed('persona');\r\n          feed.findMany(personaIds);\r\n\r\n    const query = await feed.getQuery();\r\n    const personas = query.getAll();\r\n\r\n  return personas\r\n}\r\n\r\nconst getCategoryKidsInfo = async (categoryId) => {\r\n    const Mura = getMura();\r\n    const feed = Mura.getFeed('category');\r\n          feed.prop('parentid').isEQ(categoryId);\r\n\r\n    const query = await feed.getQuery();\r\n    const categorykids = query.getAll();\r\n    // console.log('categorykids: ', categorykids);\r\n    return categorykids\r\n}\r\n\r\nconst updateCategoryIds = (name,value,curCategoriesArray,InstanceId) => {\r\n  let match = 0;\r\n  // console.log('InstanceId: ', InstanceId);\r\n    for (let i = 0; i < curCategoriesArray.length; i++) {\r\n      if (curCategoriesArray[i].name === name) {\r\n            curCategoriesArray[i].value = value;\r\n            curCategoriesArray[i].instanceid = InstanceId;\r\n          match = 1;\r\n          break;\r\n      }\r\n    }\r\n    if (!match){\r\n        curCategoriesArray.push({ \r\n          name:name,\r\n          value:value,\r\n          instanceid:InstanceId\r\n        });\r\n    }\r\n  \r\n  return curCategoriesArray;\r\n}\r\n\r\n\r\n//for debugging only\r\nconst replacerFunc = () => {\r\n  const visited = new WeakSet();\r\n  return (key, value) => {\r\n    if (typeof value === \"object\" && value !== null) {\r\n      if (visited.has(value)) {\r\n        return;\r\n      }\r\n      visited.add(value);\r\n    }\r\n    return value;\r\n  };\r\n};\r\n\r\nexport default ResourceHub;","import React,{useState,useEffect} from 'react';\r\nimport Mura from 'mura.js';\r\nimport OutputMarkup from \"./OutputMarkup\";\r\n\r\nfunction Text(props) {\r\n  const objectparams = Object.assign({}, props);\r\n\r\n  if(!objectparams.dynamicProps && (objectparams.sourcetype==='component' || objectparams.sourcetype==='boundattribute' )){\r\n    const [source, setSource]=useState('');\r\n\r\n    useEffect(() => {\r\n        getDynamicProps(objectparams).then((dynamicProps)=>{\r\n          setSource(dynamicProps.source);\r\n        });\r\n    },[]);\r\n\r\n    if(source){\r\n      return (\r\n        <OutputMarkup source={source} />\r\n      );\r\n    } else {\r\n      return (\r\n        <div></div>\r\n        );\r\n    }\r\n  } else {\r\n    let source='';\r\n    if(objectparams.dynamicProps && (objectparams.sourcetype==='component' || objectparams.sourcetype==='boundattribute')){\r\n      source=objectparams.dynamicProps.source;\r\n    } else {\r\n      source=objectparams.source;\r\n    }\r\n    if(source && source !== 'unconfigured'){\r\n      return (\r\n        <OutputMarkup source={source} />\r\n      );\r\n    } else {\r\n      return (\r\n        <div></div>\r\n        );\r\n    }\r\n  }\r\n}\r\n\r\nexport const getDynamicProps = async props => {\r\n  const data = {};\r\n  if (\r\n    typeof props.sourcetype !== 'undefined'\r\n    && (props.sourcetype === 'component' || props.sourcetype === 'boundattribute')\r\n  ) {\r\n    if(props.sourcetype === 'component'){\r\n      if(Mura.isUUID(props.source)){\r\n        const entity= await Mura.getEntity('content')\r\n          .loadBy('contentid', props.source, { type: 'component', fields: 'body' });\r\n          data.source=entity.get('body');\r\n      } else {\r\n        const entity= await Mura.getEntity('content')\r\n        .loadBy('title', props.source, { type: 'component', fields: 'body' });\r\n        data.source=entity.get('body');\r\n      } \r\n    } else if(props.sourcetype === 'boundattribute'){\r\n      if(typeof props.content.get =='function'){\r\n        data.source=props.content.get(props.source);\r\n      } else {\r\n        data.source=props.content[props.source] || '';\r\n      }\r\n    }\r\n  }\r\n\r\n  return data;\r\n};\r\n\r\nexport default Text;\r\n","import React,{useState,useEffect} from 'react';\r\nimport Form from 'react-bootstrap/Form';\r\nimport Button from 'react-bootstrap/Button';\r\nimport Alert from 'react-bootstrap/Alert';\r\n\r\nfunction PrivacyTools(props){   \r\n    // const objectparams = Object.assign({}, props);\r\n    // console.log(objectparams);\r\n\r\n    const [optIn, setOptIn] = useState(0);\r\n    const [optOut, setOptOut] = useState(0);\r\n    const [mxpAnon, setMxpAnon] = useState(1);\r\n    const [updateSuccess,setUpdateSuccess] = useState(0);\r\n    const [showingAlert,setShowingAlert] = useState(false);\r\n\r\n    useEffect(() => {\r\n        let isMounted = true;\r\n        if (isMounted) {\r\n            \r\n            getCurrentPrivacy().then(result => {\r\n                setMxpAnon(result);\r\n                console.log('result: ' + result);\r\n            }); \r\n\r\n        }\r\n        return () => { isMounted = false };\r\n    }, []);\r\n\r\n    // console.log('_mxpAnon: ', _mxpAnon);\r\n\r\n    const handleSubmit = (e) => {\r\n        e.preventDefault();\r\n        updatePrivacyMXP(optIn,optOut);        \r\n        setUpdateSuccess(1);\r\n        return false;\r\n    }   \r\n\r\n    const updatePrivacyMXP = async (optIn,optOut) => {\r\n        \r\n        const privacyOptIn = await Mura\r\n            .getEntity('privacy_tools')\r\n            .invoke(\r\n                'updatePrivacyMXP',\r\n                {\r\n                    mxp_opt_in:optIn,\r\n                    mxp_opt_out:optOut\r\n                }\r\n            );\r\n        \r\n        setShowingAlert(true);\r\n        return privacyOptIn;\r\n    }\r\n\r\n    const mxpAnonChanged = (e) => {\r\n        setMxpAnon(e.target.value);\r\n        if(e.target.value == 1){\r\n            setOptIn(0);\r\n            setOptOut(1);\r\n        } else {\r\n            setOptIn(1);\r\n            setOptOut(0);\r\n        }\r\n    }\r\n    \r\n    //update opt in / out values on radio button click\r\n    useEffect(() => {\r\n        let isMounted = true;\r\n        if (isMounted) {\r\n            if(mxpAnon == 1){\r\n                setOptIn(0);\r\n                setOptOut(1);\r\n            } else {\r\n                setOptIn(1);\r\n                setOptOut(0);\r\n            }\r\n        }\r\n    \r\n        return () => { isMounted = false };\r\n      }, [mxpAnon]); \r\n    \r\n    //show alert or not\r\n    useEffect(() => {\r\n        let isMounted = true;\r\n        if (isMounted) {\r\n            if(showingAlert){\r\n                setTimeout(() => {\r\n                    setShowingAlert(false);\r\n                }, 2000);\r\n            }\r\n        }\r\n\r\n        return () => { isMounted = false };\r\n    }, [showingAlert]);\r\n\r\n    return(\r\n    <>\r\n        <h3>Privacy Settings</h3>\r\n        {updateSuccess == 1 && showingAlert &&\r\n            <Alert variant=\"success\" >Your preference has been saved.</Alert>\r\n        }\r\n        <Form onSubmit={handleSubmit} data-autowire=\"false\">\r\n            <Form.Group controlId=\"radio_mxp_anon\">\r\n                <Form.Check\r\n                    type=\"radio\"\r\n                    id=\"mxp_anon1\"\r\n                    name=\"mxp_anon\"\r\n                    value=\"0\"\r\n                    checked={mxpAnon == 0}\r\n                    onChange={mxpAnonChanged}\r\n                    label=\"For a better experience, allow this site to store some identifying information\"\r\n                />\r\n                <Form.Check\r\n                    type=\"radio\"\r\n                    id=\"mxp_anon2\"\r\n                    name=\"mxp_anon\"\r\n                    value=\"1\"\r\n                    checked={mxpAnon == 1}\r\n                    onChange={mxpAnonChanged}\r\n                    label=\"Do not allow this site to store some identifying information\"\r\n                />\r\n            </Form.Group>\r\n            <Button variant=\"primary\" type=\"submit\">\r\n                Submit\r\n            </Button>\r\n        </Form>\r\n    </>\r\n    );\r\n}\r\n\r\nconst getCurrentPrivacy = async () => {\r\n    const mxpPrivacy = await Mura\r\n            .getEntity('privacy_tools')\r\n            .invoke(\r\n                'privacyStatus'\r\n            );\r\n    \r\n    // return mxpPrivacy.Output;\r\n    return mxpPrivacy;\r\n}\r\n\r\nexport default PrivacyTools","import React, { useState,useEffect } from 'react';\r\nimport { Decorator } from '@murasoftware/next-core';\r\nimport Mura from 'mura.js';\r\n\r\nconst GatedAsset =function(props) {\r\n    let objectparams = Object.assign({},props);\r\n    \r\n    const [gateIsOpen,setGateIsOpen]=useState(false);\r\n    const [editMode,setEditMode]=useState(Mura.editing);\r\n    const gateparams = objectparams.gateparams || {object:\"container\", items:[], 'render':'client',async:false};\r\n    const assetparams = objectparams.assetparams || {object:\"container\", items:[], 'render':'client',async:false};\r\n\r\n    gateparams.ssr=false;\r\n    assetparams.ssr=false;\r\n    gateparams.pinned=true;\r\n    assetparams.pinned=true;\r\n    \r\n    if(typeof objectparams.isgatelocked == 'undefined'){\r\n        objectparams.isgatelocked=true;\r\n    }\r\n\r\n    useEffect(() => {\r\n        let isMounted = true;\r\n        const gatedasset=Mura.getEntity('gatedasset');\r\n\r\n        if (isMounted) {\r\n            if(typeof Mura.displayObjectInstances[props.instanceid]=='undefined'){\r\n                Mura.displayObjectInstances[props.instanceid]= new Mura.DisplayObject.GatedAsset(props);\r\n            }\r\n\r\n            Mura(document).on('muraContentEditInit',function(){\r\n                if(isMounted){\r\n                    setEditMode(true);\r\n                }\r\n            })\r\n\r\n            const module= Mura('div[data-instanceid=\"' + props.instanceid +'\"]');\r\n\r\n            module.on('formSubmitSuccess',function(e){\r\n                if(isMounted && !gateIsOpen){\r\n                    const source = e.target || e.srcElement;\r\n                    const formObj=Mura(source).closest('div.mura-object[data-object=\"form\"]');\r\n                    gatedasset.invoke('openGate',{contentid: props.content.contentid,formid:formObj.data('objectid')},'get');\r\n                    setTimeout(\r\n                        function(){\r\n                            setGateIsOpen(true);\r\n                        },\r\n                        4000\r\n                    );\r\n                   \r\n                }\r\n            })\r\n            \r\n            const handleIsGateOpen = (response)=>{\r\n                if(typeof response === 'boolean' && response\r\n                    || typeof response === 'number' && response\r\n                    || typeof response === 'string' && response.toLowerCase()=='true'){\r\n                    if(isMounted){\r\n                        setGateIsOpen(true);\r\n                    }\r\n                }\r\n            }\r\n            \r\n            const checkContainerForOpenGates = function(params){\r\n                if(Array.isArray(params.items)){\r\n                    params.items.forEach((item)=>{\r\n                        if(item.object=='form'){\r\n                            gatedasset.invoke(\r\n                                'isGateOpen',\r\n                                {contentid: props.content.contentid,formid:item.objectid}\r\n                                ,'get')\r\n                                .then(\r\n                                    handleIsGateOpen,\r\n                                    handleIsGateOpen\r\n                                )\r\n                        } else if(item.object=='container'){\r\n                            checkContainerForOpenGates(item);\r\n                        }\r\n                    })\r\n                }\r\n            }\r\n\r\n            if( objectparams.isgatelocked ){\r\n                checkContainerForOpenGates(gateparams);\r\n            } else {\r\n                setGateIsOpen(true);\r\n            }\r\n            \r\n        }\r\n        return () => { isMounted = false };\r\n       \r\n      }, []);\r\n\r\n    return (\r\n        <div>\r\n            { \r\n                editMode\r\n                    ? <div><button className={!gateIsOpen ? 'btn btn-primary' : 'btn'} onClick={function(){setGateIsOpen(false)}}>Gate</button>\r\n                    <button className={gateIsOpen ? 'btn btn-primary' : 'btn'} onClick={function(){setGateIsOpen(true)}}>Asset</button></div>\r\n                    : null \r\n            }\r\n            <div>\r\n                <div className=\"mura-gate\" style={{display: !gateIsOpen ? 'block' : 'none' }}>\r\n                    <Decorator {...gateparams} content={props.content}/>\r\n                </div>\r\n                <div className=\"mura-asset\" style={{display: gateIsOpen ? 'block' : 'none' }}>\r\n                    <Decorator {...assetparams} content={props.content}/>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n\r\nexport default GatedAsset;\r\n","import React from 'react';\r\n\r\nclass Gist extends React.PureComponent {\r\n  componentDidMount() {\r\n    this._updateIframeContent();\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    this._updateIframeContent();\r\n  }\r\n\r\n  _defineUrl() {\r\n    const { id, file } = this.props;\r\n\r\n    const fileArg = file ? `?file=${file}` : '';\r\n\r\n    return `https://gist.github.com/${id}.js${fileArg}`;\r\n  }\r\n\r\n  _updateIframeContent() {\r\n    const { id, file } = this.props;\r\n\r\n    const iframe = this.iframeNode;\r\n\r\n    let doc = iframe.document;\r\n    if (iframe.contentDocument) doc = iframe.contentDocument;\r\n    else if (iframe.contentWindow) doc = iframe.contentWindow.document;\r\n\r\n    const gistLink = this._defineUrl()\r\n    const gistScript = `<script type=\"text/javascript\" src=\"${gistLink}\"></script>`;\r\n    const styles = '<style>*{font-size:12px;}</style>';\r\n    const elementId = file ? `gist-${id}-${file}` : `gist-${id}`;\r\n    const resizeScript = `onload=\"parent.document.getElementById('${elementId}').style.height=document.body.scrollHeight + 'px'\"`;\r\n    const iframeHtml = `<html><head><base target=\"_parent\">${styles}</head><body ${resizeScript}>${gistScript}</body></html>`;\r\n\r\n    doc.open();\r\n    doc.writeln(iframeHtml);\r\n    doc.close();\r\n  }\r\n\r\n  render() {\r\n    const { id, file } = this.props;\r\n\r\n    return (\r\n      <iframe\r\n        ref={(n) => { this.iframeNode = n; }}\r\n        width=\"100%\"\r\n        frameBorder={0}\r\n        id={file ? `gist-${id}-${file}` : `gist-${id}`}\r\n      />\r\n    );\r\n  }\r\n}\r\n\r\nconst render =function(props) {\r\n    let objectparams = Object.assign({},props);\r\n\r\n    objectparams.gistid = objectparams.gistid || '';\r\n    objectparams.file = objectparams.file || '';\r\n\r\n    if(objectparams.gistid){\r\n        return (\r\n            <Gist id={objectparams.gistid} file={objectparams.file} />\r\n        )\r\n    } else {\r\n        return (\r\n            <div></div>\r\n        )\r\n    }\r\n    \r\n}\r\n\r\nexport default render;\r\n"],"names":["Youtube","props","instanceid","videoid","React","Vimeo","Wistia","useEffect","Mura","loader","loadjs","padding","position","height","left","top","width","ModalVideo","modalcta","buttonclass","buttonplayiconsize","buttonctatext","showbuttonplayicon","openPlayer","openVidyardLightbox","getVideoPlayer","players","videoplatform","Video","displaytype","length","ItemDate","date","formatteddate","releasedate","lastupdate","Date","Intl","DateTimeFormat","year","month","day","format","ItemCredits","Credits","credits","split","creditsList","credit","i","push","ItemTags","Tags","tags","tagList","tag","htmlDirectives","transform","tree","visit","ondirective","node","data","hast","h","name","attributes","hName","tagName","hProperties","properties","renderDirective","elem","Object","assign","toLowerCase","Decorator","ssr","children","createElement","e","console","error","renderers","textDirective","leafDirective","containerDirective","heading","level","OutputMarkup","source","className","parsedSource","getMura","parseStringAsTemplate","getMuraConfig","ConnectorConfig","htmleditortype","gfm","slug","directive","__html","ArticleMeta","log","fields","fieldlist","titleclass","item","content","catAssignments","categoryassignments","FeaturedCategoryOnly","featuredcategoryonly","map","field","title","menutitle","summary","getLayout","layout","muraConfig","ComponentRegistry","uselayout","getDefaultQueryPropsFromLayout","getQueryProps","Collection","objectparams","DynamicCollectionLayout","component","dynamicProps","_collection","collection","EntityCollection","_requestcontext","useState","setCollection","isMounted","getDynamicProps","then","_dynamicProps","RouterlessLink","RouterLink","href","getHref","getItemsPerPage","renderMode","nextn","itemsperpage","cdata","sourcetype","feed","getFeed","getAll","andProp","isEQ","contentid","getSelectFields","expand","getExpandFields","maxItems","maxitems","itemsPerPage","sort","sortby","sortdirection","getQuery","query","src","items","Array","isArray","JSON","parse","where","findMany","related","totaltems","getRelatedContent","getEntity","set","imagesizes","getImageSizes","isUUID","imageSizes","fieldarray","hasDate","hasFilename","hasImage","hasFileid","hasContentid","hasContenthistid","hasParentid","filter","join","CollectionNav","nav","pos","setPos","scrollpages","itemsTo","setItemsTo","get","next","prev","itemsOf","itemsToMax","isInNode","isEndVisible","end","isScrolledIntoView","setTimeout","toLocaleLowerCase","endindex","setEndindex","has","incoming","reverse","forEach","unshift","goToPage","page","NavButton","val","onItemClick","_onClick","label","NavButtonLabel","FontAwesomeIcon","faChevronRight","faChevronLeft","CollectionLayout","link","CurrentItems","itemsList","Link","CollectionReadMoreBtn","ctatext","ItemImage","image","alt","itemImage","CollectionLayoutAccordian","accordionpadding","collapseindicators","collapseindicatorslocation","activeId","setActiveId","toggleActive","id","Card","Header","imagesize","AlternatingBoxes","includes","AlternatingRows","ItemCategories","Categories","categories","catsList","cat","cats","Featuredonly","hasnext","featuredonly","filteredCats","category","isfeature","catsTo","categoryid","categoryname","CheckForItems","Cards","totalpages","NoItemsMessage","rowcolssm","rowcolsmd","rowcolslg","rowcolsxl","filteredField","showcategories","featuredcategoriesonly","List","ListImage","indexOf","ListMeta","Masonry","SlickSlider","CustomNextArrow","style","onClick","CustomPrevArrow","slides","Number","slidestoshow","sliderlayout","dots","arrows","infinite","speed","autoplay","autoplayspeed","lazyload","vertical","verticalswiping","fade","centermode","centerpadding","breakpoint","settings","slidesToShow","slidesToScroll","objectid","SliderItem","sliderimage","Container","displayObjectInstances","DisplayObject","$items","resetInstanceIds","_items","createUUID","object","cloning","obj","key","moduleStyleData","getComponent","Hr","CTAButton","buttontext","buttoncolor","buttonsize","buttonlink","buttontarget","buttonblock","btnclass","Embed","containerid","html","Image","caption","imagelink","fit","imagelinktarget","margin","FigCaption","Img","objectFit","Login","processDisplayObject","MatrixSelector","_personaIds","personaProps","_stageIds","stageProps","personaIds","setPersonaIds","stageIds","setStageIds","_selfIdStart","selfidstart","_selfIdMiddle","selfidmiddle","_selfIdEnd","selfidend","_displayType","selfIdStart","selfIdMiddle","selfIdEnd","displayType","curSelPersona","setCurSelPersona","curSelStage","setCurSelStage","buttonEnabled","setButtonEnabled","updateSuccess","setUpdateSuccess","showingAlert","setShowingAlert","isUpdating","setIsUpdating","selPersonaValidated","setSelPersonaValidated","selStageValidated","setSelStageValidated","handleSubmit","preventDefault","updateExperience","updateSelectedPersona","newPersona","target","value","checkSelectValidation","updateSelectedStage","newStage","persona","stage","updateButtonStatus","personaid","stageid","Personaid","Stageid","invoke","exp","personaselected","stageselected","setSeconds","trackEvent","action","seconds","window","location","getPersonas","getStages","open","setOpen","widgetposition","faBolt","MatrixSelectorFooter","CustomLinks","customlinks","from","UtilityLinks","MatrixForm","personaId","selfidq","stageId","PrimaryNav","setItems","Render","homeNavIcon","navlogo","displayhome","filename","kids","navicon","translations","prop","homeid","type","Homelink","homeTitle","createIcon","LangOptions","translation","siteid","url","NavLinkDropdown","display","child","ResourceHub","author","editing","router","useRouter","t","a","_curSubtype","_curCategoryIds","_curPersonaId","_curCategoriesArray","_hasMXP","filterprops","subtype","selectedcats","sc","hasmxp","instanceId","curSubtype","setCurSubtype","curCategoriesArray","setCurCategoriesArray","curCategoryIds","setCurCategoryIds","curPersonaId","setCurPersonaId","curSearchText","setCurSearchText","hasMXP","setHasMXP","showtextsearch","showTextSearch","newFilter","setNewFilter","toString","filterUpdated","setFilterUpdated","updateFilter","updateCategoryIds","getCategoryIds","getFilterProps","filterProps","getCollection","categoriesList","undefined","filterCategories","splice","excludeIDList","isIn","containsValue","isNotIn","isNEQ","useCategoryIntersect","andOpenGrouping","orProp","closeGrouping","sortBy","selectedcategories","newfilter","Subtype","Categoryid","CurSelectedCats","NewFilter","RenderFilterForm","categoriesArray","setCategoriesArray","personasArray","setPersonasArray","subtypesArray","subtypes","categoryIds","categoryids","personaids","getCategoriesInfo","getPersonasInfo","faSearch","index","curCategoryId","option","CategorySelect","categoryKids","setCategoryKids","curSelectValue","getCategoryKidsInfo","filterlabel","personas","categoryId","categorykids","InstanceId","match","Text","setSource","loadBy","entity","PrivacyTools","optIn","setOptIn","optOut","setOptOut","mxpAnon","setMxpAnon","getCurrentPrivacy","result","updatePrivacyMXP","mxp_opt_in","mxp_opt_out","privacyOptIn","mxpAnonChanged","GatedAsset","gateIsOpen","setGateIsOpen","editMode","setEditMode","gateparams","async","assetparams","pinned","isgatelocked","gatedasset","document","on","module","srcElement","formObj","closest","formid","handleIsGateOpen","response","checkContainerForOpenGates","params","Gist","componentDidMount","_updateIframeContent","componentDidUpdate","prevProps","prevState","_defineUrl","file","fileArg","iframe","iframeNode","doc","contentDocument","contentWindow","gistLink","gistScript","styles","elementId","resizeScript","iframeHtml","writeln","close","render","n","PureComponent","gistid"],"mappings":"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"}